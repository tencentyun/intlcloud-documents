## 백업 개요
### 백업 모드
TencentDB for MySQL 고가용 버전은 **자동 백업**과 **매뉴얼 백업** 2종 모드로 데이터를 백업할 수 있습니다.

### 백업 유형
TencentDB for MySQL 고가용 버전은 2종 백업 유형을 지원합니다.
- **물리 백업**, 물리 데이터 풀 복제(자동 백업과 매뉴얼 백업을 지원합니다.)
- **로직 백업**, SQL 문구 백업(매뉴얼 백업을 지원합니다).
>
>- 물리 백업 복구 방식은 xbstream으로 패킷을 해제해야 합니다. 상세내역은 [물리 백업으로 데이터베이스 복구](https://cloud.tencent.com/document/product/236/33363)를 참조하십시오.
>- 낱개 인스턴스의 테이블 수량은 100만을 초과하면 백업에 실패할 수 있습니다. 데이터 모니터링에도 영향을 미칠 수 있으므로 테이블 수량을 합리한 수준으로 적용해주시고, 낱개 인스턴스 테이블 수량은 100만이상을 넘지 않도록 제어하십시오.
>- Memory 엔진 테이블의 데이터는 메모리에 저장되어있으므로 Memory 엔진 테이블을 물리 백업할 수 없습니다. 데이터 손실을 피하고자 Memory 엔진 테이블을 InnoDB 테이블로 전환할것을 권장드립니다. 

| 물리 백업 장점 | 로직 백업 단점 |
|---------|---------|
| <li>백업 속도가 빠릅니다.<li>스트리밍 백업과 압축 해제를 지원합니다.<li>백업 성공률이 높습니다.<li>백업이 심플하고 효율적입니다.<li>백업을 기반으로 커플링 조작 시, 예를 들면 RO 추가, 재해 복구 추가 시 빨라집니다.<li>물리 백업을 완료하는 평균시간은 로직 배업의 1/8 수준입니다.<li>물리 백업 액세스 속도는 로직 백업보다 10배정도 빠릅니다.| <li>복구 시에 SQL를 실행하고 인덱스를 생성해야 하며, 복구 시간이 길어집니다.<li>백업 속도가 느립니다. 데이터량이 많을 경우 속도가 더 느려집니다.<li>백업 프로세스는 인스턴스에 부하를 주며, 마스터 슬레이브가 딜레이할 수 있습니다.<li>부동 소수점의 입상도 메시지를 손실할 수 있습니다.<li>다양한 요인(에러 예시 이미지 등)으로 백업이 실패할 수 있습니다.<li>백업을 기반으로 커플링 조작 진행합니다, 예를 들면 RO 추가, 장애 복구 추가 작업이 느려질 수 있습니다. |

### 백업 오브젝트
| 데이터 백업 | 로그 백업 |
|---------|---------|
| MySQL 5.5, 5.6, 5.7(고가용 버전): <li>자동 백업은 전체 물리 백업을 지원합니다.<li>매뉴얼 백업은 전체 물리 백업을 지원합니다. 전체 로직 백업과 낱개 라이브러리 낱개 테이블 로직 백업을 지원합니다.<li>자동 백업과 매뉴얼 백업은 각 압축, 다운로드를 지원합니다.<li>자동 백업은 능동적으로 삭제할 수 없으며, 보류 시간을 설정할 수 있습니다.<li>매뉴얼 백업은 능동적으로 삭제할 수 있으며, 삭제하지 않으면 계속 보류합니다.| MySQL 5.5, 5.6, 5.7(고가용 버전):<li>로그 파일은 인스턴스 백업 공간을 점용합니다.<li>로그 파일은 다운로드할 수 있으나 압축할 수 없습니다.<li>로그 파일 보류 시간을 설정할 수 있습니다.|

## 주의사항
-  2019년 02월 26일부터 TencentDB for MySQL의 자동 백업은 물리 백업만 지원합니다. 자동 백업 설정은 기본적으로 물리 백업으로 적용하며, 더이상 로직 백업을 제공하지 않습니다. 로직 백업으로 저장량을 자동 백업한 인스턴스는 차츰 물리 백업으로 자동 교체됩니다.
해당 교체 작업은 서비스 액세스에 영향을 미치지 않습니다만, 자동 백업의 사용 방식에 영향을 미칠 수 있습니다. 로직 백업을 원하시면 [TencentDB for MySQL 콘솔](https://console.cloud.tencent.com/cdb)에서 매뉴얼 백업 모드 혹은 [API 호출](https://cloud.tencent.com/document/product/236/15844)을 통해 로직 백업을 생성할 수 있습니다.
- 로직 백업 혹은 물리 백업 파일은 모두 압축되므로 일부 다운로드 파일을 사용할 수 없습니다. 이때 매뉴얼로 로직 백업의 백업 파트 라이브러리 테이블 기능을 교체할 수 있습니다. 상세내역은 [매뉴얼 백업](#manual-backup)을 참조하십시오.
- 인스턴스 백업 파일은 백업 공간을 점용하므로 요금 부과 시 별도의 요금이 추가되는 경우가 없도록, 백업 주기를 합리하게 기획하고, 백업 공간을 합리적으로 사용하시기 바랍니다. 
- 서비스의 낮은 피크타임에 백업해주시기 바랍니다.
- 백업이 필요한 파일은 보류기간을 초과하여 삭제되는 경우가 없도록, 필요한 백업 파일을 빠른 기간내에 로컬에 다운로드하시기 바랍니다.
- 백업 기간에 테이블 잠금으로 백업이 실패하는 경우가 없도록 확보하고자 DDL 조작을 금지합니다. 
-백업 공간은 2019년 11월 22일 0시부터 차츰 요금을 부과합니다. 디테일한 일정은 [백업공간 요금부과공지](https://intl.cloud.tencent.com/document/product/236/31919)를 참조하십시오.

## MySQL 데이터 자동 백업
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인하여 인스턴스 리스트 웹페이지에서 인스턴스명을 클릭하여 관리 웹페이지에 접속합니다. [백업 복구]>[자동 백업 설정]을 선택합니다.
![](https://main.qcloudimg.com/raw/69fed1aac393a518bd8cc2ad1fea550f.png)
2. 백업 설정 팝업창에서 각 백업 파라미터를 선택하고 [확인]을 클릭합니다. 파라미터 설명은 다음과 같습니다.
<table>
<thead>
<tr>
<th>파라미터</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>백업 주기</td>
<td>데이터 안전을 위해, 1주일에 최소 2회 백업하십시오.</td>
</tr>
<tr>
<td>백업 시간</td>
<td><ul><li>시간 구간을 커스텀하여 선택할 수 있습니다. 서비스의 낮은 피크타임에 설정하시기 바랍니다.
<li>기본 백업 시간은 시스템이 스스로 할당한 백업 시작 시간입니다. 백업 시작 시간은 백업이 기동을 시작하는 시간이며, 백업을 종료하는 시간이 아닙니다. <br>예를 들면, 02:00-06:00를 선택하면 시스템은 02:00-06:00 시간 범위에서 임의 시간에 백업을 시작하며, 구체적인 시작 시간은 백엔드 백업 정책과 백업 시스템의 상황에 따라 다를 수 있습니다.</td>
</tr>
<tr>
<td>데이터 백업 보류기간</td>
<td>데이터 백업 파일은 7일-732일 보류할 수 있으며, 기본적으로 7일 보류합니다.</td>
</tr>
<tr>
<td>로그 백업 보류 시간</td>
<td>로그 백업 파일은 7일-732일 보류할 수 있으며, 기본적으로 7일 보류합니다.<strong>로그 백업 일수는 데이터 꼭 백업 일수보다 같거나 작아야 합니다.</strong>  </td>
</tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/a371d4ba960264aa5630b59a3bfe5096.png"  style="margin:0;">


<span id = "manual-backup"></span>
## MySQL 데이터 매뉴얼 백업
매뉴얼 백업 기능을 통해 사용자는 스스로 백업 타스크를 오픈할 수 있습니다.
>
>- 매뉴얼 백업은 전체 물리 백업, 전체 로직 백업과 낱개 라이브러리 테이블을 로직 배업할 수 있습니다. 
>- 매뉴얼 백업은 능동적으로 삭제하고 백업 공간을 릴리스하므로 공간을 낭비하고 점용하는 경우를 피합니다. 
>
1. 인스턴스 리스트 웹페이지에서 인스턴스명을 클릭하여 관리 웹페이지에 접속, [백업 복구]>[매뉴얼 백업]태그를 선택합니다.
2. 백업 설정 팝업창에서 백업 모드와 오브젝트를 선택하고 [확인]을 클릭합니다.
![](https://main.qcloudimg.com/raw/a16e644f51756b6a98597945e45329cd.png)
>혹 로직 백업에서 낱개 라이브러리 백업 혹은 낱개 테이블을 백업하려면 좌측 [라이브러리 테이블 선택]에서 백업하려는 데이터베이스 혹은 데이터 테이블을 체크하고, 데이터베이스 혹은 테이블을 우측 리스트에 추가합니다. 혹 데이터베이스를 소유하고 있지 않다면, 우선 데이터베이스 혹은 테이블을 생성하시기 바랍니다.
>
![](https://main.qcloudimg.com/raw/76924e2c76ac348b68ed113d679d6907.png)

