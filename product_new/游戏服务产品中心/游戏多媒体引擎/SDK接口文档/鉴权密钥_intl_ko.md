텐센트 클라우드 게임 멀티미디어 엔진 제품을 쉽게 디버깅하고 액세스 할 수 있도록 모든 플랫폼에 대한 인증키 관련 기술 문서를 소개합니다.


## 음성키 백엔드 배포
텐센트 클라우드 게임 멀티미디어 엔진은 실시간 음성 채팅 및 오프라인 음성 인증을 위한 인증키를 제공하며 해당 문서는 백엔드 배포 솔루션입니다.
인증에 사용되는 서명 생성 프로세스에는 ** 일반 텍스트**, ** 키** 및 ** 알고리즘 **이 포함됩니다.

### 일반 텍스트
일반 텍스트는 아래 네트워크 핃드의 순서대로 연결됩니다.

|필드 설명   | 유형/길이|  값 정의/비고|
| ---------------- |-------------------|--------------|
| cVer|unsigned char/1|버전 번호, 입력 길이: 1|
| wOpenIDLen|unsigned short/2|사용자의 계정 길이|
| strOpenID|wOpenIDLen|사용자의 계정 스트링|
| dwSdkAppid|unsigned short/4|개발자 SDKappid|
| dwReserved1|unsigned int/4|입력값: 0|
| dwExpTime|unsigned int/4|만료 시각(현재시간+유효기간[단위: 초, 권장값 300 초])|
| dwReserved2|unsigned int/4|입력값: -1 혹은 0xFFFFFFFF|
| dwReserved3|unsigned int/4|입력값: 0|
| wRoomIDLen|unsigned short/2|오프라인 음성 서비스라면 사용자의 체크 인 코드의 길이 0을 입력하십시오.|
| strRoomID|wRoomIDLen|사용자의 체크 인 코드 스트링|

### 보안키
텐센트 클라우드 GME 콘솔 관련 권한 키를 얻습니다.
![](https://main.qcloudimg.com/raw/5f360cf9f725960c08db4de4f06068da.png)

### 알고리즘
TEA 대칭 암호화 알고리즘
전체적인 권장 사항으로 초기에 클라이언트 배포 솔루션을 사용하면 나중에 게임 앱 백엔드에 배포하기 위해 최적화할 수 있습니다.

|솔루션       | 장점        | 단점|
| ------------- |-------------|-------------| 
| 백엔드 배포    |보안성 높음|백엔드 연동 테스트 개발|
| 클라이언트 배포      |빠른 액세스|보안성 낮음|

#### 백엔드 배포 사용 방법
백엔드에서 클라이언트로 암호화 스트링을 생성한 후 전달됩니다. 클라이언트는 다음 환경에 적용됩니다: API : EnterRoom을 호출하여 체크 인에 들어가면 암호화 스트링은 체크 인 파라미터의 authBuffer 필드로 전송됩니다.




### 암호화 알고리즘 상세 정보
- 보안키: APPID는 인증 키의 md5 값에 해당하며 길이는 16 바이트입니다.
- 암호화 알고리즘: TEA 암호화
- 암호화 라이브러리와 예시: 첨부파일 [authbuffer.zip](https://main.qcloudimg.com/raw/c8be793e20c85114499f52e0f8c29190.zip)

>!콘솔에서 보안키를 수정 후, 15분~1시간 이내에 생성하므로 빈번한 수정은 삼가해 주십시오.



#### 암호화 방법	
- 암호 텍스트의 숫자는 네트워크 바이트 순서(빅 엔디언)로 변환됩니다.;
- 암호문을 스트링으로 연결;
- TEA 암호화로 스트링을 암호화합니다. symmetry_encrypt 함수가 출력한 스트링은 권한 암호화 스트링입니다；

>!이진법 스트링을 16진법으로 변환하지 않습니다.


