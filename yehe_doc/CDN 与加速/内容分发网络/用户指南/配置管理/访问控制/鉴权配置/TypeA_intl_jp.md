## アルゴリズムの説明
**アクセスURL形式**
`http://DomainName/Filename?sign=timestamp-rand-uid-md5hash`

**アルゴリズムの説明**
- timestamp：UNIX形式の10進数のタイムスタンプです。
- rand：0〜100の大文字と小文字および数字で構成されるランダムな文字列です。
- uid：0。
- md5hash：MD5（ファイルパス-timestamp-rand-uid-カスタマイズキー）。

**リクエスト例**
`http://cloud.tencent.com/test/test.jpg?sign=1582791032-im1acp76sx9sdqe601v-0-dd63f95e739ed4b47427a129d21ef4e3`

>MD5値を計算する際に、リクエストパスが`http://cloud.tencent.com/test.jpg`の場合、MD5を計算する際のパスは`/test.jpg`となります。

## 設定ガイド
### パラメータの説明
TypeAに必要な設定は以下のとおりです。
![](https://main.qcloudimg.com/raw/446781f6e47823eae931f8d8a3a5545e.png)
**認証キーのカスタマイズ**：キーは6～40文字の大文字と小文字および数字で構成されています。キーを大切に保管してください。ユーザー側とサーバー側のみ知っている必要があります。
**認証パラメータ名のカスタマイズ**：上記例のsignを、1〜100文字の大文字と小文字、数字、およびアンダースコアで構成されるパラメータ名に置き換えます。CDNはリクエストを受信した後、指定された署名パラメーターの値を読み取り、MD5値を計算します。結果が渡されたmd5hash値と一致する場合、署名の検証は成功し、検証が失敗した場合は、直接に403エラーを返します。
**有効時間のカスタマイズ**：リクエストのタイムスタンプ値と設定された有効時間を介して、現在の時刻と比較し、リクエストの有効期限が切れているかどうかを判断します。有効期限切れの場合、直接に403エラーを返します。 

### オブジェクト
キー、パラメータ名、および有効期間を設定した後、必要に応じて認証オブジェクトを指定でき、以下の3つのモードがサポートされています。
![](https://main.qcloudimg.com/raw/1952a0ac13633a87d4b676e52bf2eb10.png)
+ 指定されたドメイン名配下のすべてのファイルは認証される必要があります。
+ 指定されたタイプのファイルを認証不要に、他のすべてのファイルは認証される必要があります。
+ 指定されたタイプのファイルは認証される必要があります。

## 注意事項
**キャッシュヒット率**
ドメイン名のTypeA認証モードを有効にしている場合、アクセスURLには認証パラメーターが含まれます。CDNノードでリソースをキャッシュする時、認証パラメーターが自動的に無視されるため、キャッシュヒット率には影響しません。
**back to originポリシー**
TypeA認証モードが有効になっているドメイン名のアクセス形式は次のとおりです。
`http://DomainName/Filename?sign=timestamp-rand-uid-md5hash`

認証が成功した後、CDNノードがヒットしない場合は、ノードはback to originリクエストを送信します。**形式はアクセス要求と一致しており、signパラメータは保持されます**。オリジンサーバーは必要に応じて無視されるか、２次検証が行われます。
