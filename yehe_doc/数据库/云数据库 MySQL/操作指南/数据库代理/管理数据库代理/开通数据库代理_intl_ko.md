
본문에서는 TencentDB for MySQL 콘솔을 통한 데이터베이스 프록시 활성화 방법에 대해 소개합니다.

[데이터베이스 프록시](https://intl.cloud.tencent.com/document/product/236/42048)는 TencentDB 서비스와 애플리케이션 서비스 간의 네트워크 프록시 서비스입니다. 애플리케이션 서비스가 데이터베이스에 액세스할 때 모든 요청을 프록시하는 데 사용됩니다. 자동 읽기/쓰기 분리, 연결 풀, 연결 지속성 등의 고급 기능을 제공하며 고가용성, 고성능, OPS 지원 및 사용 편의성을 자랑합니다.

## 전제 조건
- 인스턴스가 실행 중이고 2노드 또는 3노드 아키텍처를 사용합니다.
- 인스턴스 배포 방식이 단일 가용존입니다.

## 주의 사항
- 데이터베이스 프록시는 현재 다음 리전에서 지원됩니다.
  - 베이징(1, 2, 4존 제외), 상하이(1존 제외), 광저우(1, 2존 제외), 청두, 충칭, 난징, 홍콩(1존 제외).
  - 도쿄(1존 제외), 방콕(1존 제외), 버지니아(1존 제외), 실리콘밸리(1존 제외), 뭄바이(1존 제외), 서울(1존 제외), 싱가포르(1, 2존 제외).
- 현재 데이터베이스 프록시가 지원하는 버전은 2노드, 3노드 MySQL 5.7(커널 마이너 버전은 20201230 이상이어야 함), 2노드, 3노드 MySQL 8.0(커널 마이너 버전은 20211130 이상)이 있으며, 원본 인스턴스의 커널 마이너 버전을 업그레이드하면, 모든 관련된 읽기 전용 인스턴스와 재해 복구 인스턴스도 함께 업그레이드됩니다. 자세한 내용은 [커널 마이너 버전 업그레이드](https://intl.cloud.tencent.com/document/product/236/36816)를 참고하십시오.

## 작업 단계
1. [TencentDB for MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 뒤, 인스턴스 리스트에서 프록시를 활성화할 원본 인스턴스를 선택하고, 인스턴스 ID 혹은 **작업**열의 **관리**를 클릭하여 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 **데이터베이스 프록시** 탭을 선택하고 **지금 활성화**를 클릭합니다.
![](https://main.qcloudimg.com/raw/46d9e9b30975b51bee00a16c64f31c8b.png)
3. 팝업 창에서 사양 노드를 선택하고 **확인**을 클릭한 다음 페이지를 새로고침 합니다.
    - 네트워크 유형: VPC만 지원하며, 기본 설정은 원본 인스턴스와 동일합니다. 
    - 프록시 사양: 2코어 4000MB 메모리, 4코어 8000MB 메모리, 8코어 16000MB 메모리.
    - 노드 개수: 프록시 노드 수. 프록시 노드 수는 원본 인스턴스와 읽기 전용 인스턴스 CPU 코어 수 합의 1/8(올림한 정수)로 설정을 권장합니다. 예: 원본 인스턴스의 CPU가 4코어이고, 읽기 전용 인스턴스의 CPU는 8코어일 경우, 권장 프록시 수 = (4 + 8 ) / 8 ≈ 2
    - 연결 풀 상태: 연결 풀에 대한 자세한 내용은 [연결 풀 개요](https://intl.cloud.tencent.com/document/product/236/45622)를 참고하십시오.
    - 보안 그룹: 네트워크 보안 격리의 중요한 수단이며 필요에 따라 기존 보안 그룹을 선택하거나 새 보안 그룹을 생성할 수 있습니다.
<img src="https://main.qcloudimg.com/raw/a3d8fafb1930d0298deb9cf2f08e706c.png"  style="zoom:90%;"> 
4. 활성화 성공 후 데이터베이스 프록시 페이지에서 기본 정보를 확인하고 프록시 노드를 관리할 수 있으며, 또한 연결 주소 항목에서 데이터베이스 프록시 주소 및 네트워크 유형을 수정하고 메모를 추가할 수 있습니다.
>?
>- 프록시 노드 목록에서 **연결 수**를 확인하거나 각 프록시 노드의 성능 모니터링 데이터를 확인하여 노드의 연결 수가 불균형한지 확인할 수 있으며, 불균형한 경우 **리밸런싱**을 클릭하여 연결을 분산할 수 있습니다.
>- 리밸런싱으로 인해 프록시 노드가 다시 시작되고 다시 시작하는 동안 서비스를 일시적으로 사용할 수 없게 됩니다. 사용량이 적은 시간에 서비스를 다시 시작하는 것이 좋습니다. 귀하의 비즈니스에 재연결 메커니즘이 있는지 확인하십시오.
>
![](https://main.qcloudimg.com/raw/083d38858367fd7fe65e90fb92210178.png)

