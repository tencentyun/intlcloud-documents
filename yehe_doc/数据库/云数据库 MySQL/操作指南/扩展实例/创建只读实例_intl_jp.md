## 概要
MySQL は、ユーザーによる1つまたは複数の読取専用インスタンスの作成をサポートし、また、ユーザーによるリード・ライト分離と1マスタ対複数スレーブのユースケースをサポートすることで、ユーザーデータベースの読み取り負荷能力を明らかに向上させることができます。
現在、アドレスのリード・ライト分離（すなわち、読み取りリクエストと書き込みリクエストの自動分離）をサポートしません。読取専用インスタンスは、単独のIP、PORT を介してアクセスする必要があります。
>?
>- 読み取り専用インスタンス料金については、[製品価格](https://buy.Intl.cloud.tencent.com/price/cdb)をご参照ください。
>- 読み取り専用インスタンスは、インスタンス詳細ページにおいて独立したプライベートネットワークアドレスの有効化をサポートするとともに、プライベートネットワークIPとポートのカスタム変更をサポートします。

#### 基本概念
- ROグループ：ロードバランシング機能を備えた読み取り専用インスタンスグループです。ROグループに複数の読み取り専用インスタンスがある場合、ユーザーの読み取りリクエスト量をグループ内の各読み取り専用インスタンスに均等に分散できます。またROグループは、データベースにアクセスするためのIPとPORTを外部に提供します。
- 読み取り専用インスタンス：読み取りリクエストをサポートできる単一ノード（スレーブなし）インスタンスです。読み取り専用インスタンスは個別に存在することはできず、各読み取り専用インスタンスはいずれかのROグループに属します。

#### インフラストラクチャ
読取専用インスタンスは、MySQL binlogのマスター/スレーブ同期機能を使用して、マスターインスタンス（ソースデータベース）の変更をすべての読取専用インスタンスに同期させます。読取専用インスタンスは単一ノード（スレーブノードなし）アーキテクチャにあります。読取専用インスタンスがクラッシュした場合、繰り返して復元を試行します。より高いレベルの可用性を求める場合、 ROグループを選択してください。
![](https://main.qcloudimg.com/raw/bf2ef3ecfc232f6e69a99ead319a5cb2.png)

## 機能の制限について
- **メモリ1GB、ハードディスク50GB以上の仕様で、かつMySQL 5.6およびそれ以降のバージョン、読み取り専用インスタンスを購入するためのInnoDBエンジンの2ノード、3ノード**マスターインスタンスのみをサポートします。マスターインスタンスがこの仕様よりも低い場合は、まずマスターインスタンスの仕様をアップグレードしてください。
- 読み取り専用インスタンスの最低仕様は、メモリ1GB、ハードディスク50GB、マスターインスタンスの使用済みストレージ仕様の1.1倍以上である必要があります。
- 1つのマスターインスタンスは、最大5つの読取専用インスタンスまで作成できます。
- バックアップとロールバック機能をサポートしません。
- 読取専用インスタンスへのデータ移行をサポートしません。
- データベースの作成・削除をサポートしません。また、phpMyAdmin（PMA）をサポートしません。
- アカウントの作成・削除をサポートしません。アカウントの認証、アカウントとパスワードの変更をサポートしません。

## 注意事項
- 読取専用インスタンスでは、アカウントとデータベースをメンテナンスする必要がなく、両方ともマスターインスタンスから同期します。
-  MySQLバージョンが5.6であり、 GTIDを有効にしていない場合、コンソールからGTIDを有効にしてから読取専用インスタンスを追加します。
GTID有効化には長い時間がかかり、また、インスタンスの接続が数秒間で切断されるため、業務量の少ない時期に作業するほか、データベースアクセス用のプログラムに再接続機能を追加することをお勧めします。
- 読み取り専用インスタンスは、InnoDBエンジンのみをサポートします。
- データ同期にディレーが発生しているため、複数の読取専用インスタンス間に少量のデータが一致しないケースがあります。各読取専用インスタンスとマスターインスタンス間の同期レイテンシーについて、コンソールで確認できます。
- 読み取り専用インスタンスのインスタンス仕様はマスターインスタンスと一致する必要はないので、ユーザーは負荷の状況に応じたアップグレードがしやすくなります。同じROグループ内の読み取り専用インスタンスは、インスタンス仕様の一貫性を維持することをお勧めします。

## 操作手順
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストのインスタンスIDまたは**操作**の列の**管理**をクリックし、インスタンス詳細ページに進みます。
2. インスタンス詳細ページで、**インスタンスアーキテクチャ図**中の**読み取り専用インスタンスの追加**をクリックするか、または読み取り専用インスタンスページで、**新規作成**をクリックして、購入ページに進みます。
3. 購入ページで、読み取り専用インスタンスに対応する設定を選択し、間違いないことを確認してから、**今すぐ購入**をクリックします。
 -**指定ROグループ**：システムの自動割り当て、ROグループの新規作成および既存のROグループをサポートします。
    - システム自動割り当て：一度に複数のインスタンスを購入すると、各インスタンスに独立したROグループが割り当てられます。重みの割り当て方法は、デフォルトではシステム自動割り当てになります。
    - ROグループの新規作成：ROグループを新規作成します。1回で複数のインスタンスを購入した場合、すべてこのROグループに割り当てられます。重みの割り当て方法は、デフォルトではシステム自動割り当てになります。
    - 既存のROグループ：既存のROグループ1つを指定します。一度に複数のインスタンスを購入した場合、それらはすべてこのROグループに割り当てられます。
    重みの割り当て方法は、ROグループの設定と同様です。ROグループにシステム自動割り当てが設定されている場合、ROグループは購入仕様に従って自動的に追加されます。カスタム割り当ての場合、デフォルトの重みはゼロになります。
		同じROグループのプライベートネットワークアドレスは同様であるため、VPCネットワークは同じセキュリティグループ設定を共有します。ROグループを指定すると、購入時にセキュリティグループをカスタマイズできなくなります。
 -**遅延・超過の削除**：削除ポリシーを有効にするかどうか。削除されたインスタンスの重みは、自動的に0に設定されます。読み取り専用インスタンスの遅延がしきい値を超えて削除された場合、ユーザーにアラートが発行され（読み取り専用インスタンス削除アラートと受信対象の設定については、[アラート機能](https://intl.cloud.tencent.com/document/product/236/8457)をご参照ください）、またインスタンスのステータスがサービス停止・同期中となり、重みが0になります。読み取り専用インスタンスの遅延時間がしきい値未満の場合、再度ROグループに入ります。同時に、インスタンスで遅延・超過の削除機能が有効になっているかに関わらず、読み取り専用インスタンスの障害が除去されると、インスタンスが修復された後、インスタンスは再度ROグループに入ります。
![](https://main.qcloudimg.com/raw/5c002d37fdeb72a5396a394133672338.png)
4. 購入が完了すると、インスタンスリストに戻り、インスタンスのステータスが**実行中**になるまで待機します。「実行中」になると、通常どおり使用できます。

## よくあるご質問
#### 読み取り専用インスタンスの削除ルールとは何ですか？
遅延・超過の削除を有効にした後、ROグループは、遅延しきい値とリザーブドインスタンス最小数に基づいて削除するインスタンスを判断し、削除されるインスタンスの重みは自動的に0に設定されます。読み取り専用インスタンスの遅延がしきい値を超えて削除されると、ユーザーにアラートが発行され、またインスタンスのステータスがサービス停止・同期中となり、重みが0になります。読み取り専用インスタンスの遅延時間がしきい値未満の場合、再度ROグループに入ります。
- 遅延しきい値：読み取り専用インスタンスに設定する遅延・超過しきい値。しきい値を超えた読み取り専用インスタンスは、ROグループから削除されます。
- 最小保留インスタンス数：グループ内で保証する必要のあるインスタンスの下限数。既存の読み取り専用インスタンス数がこの下限以下であり、かつ遅延時間がしきい値を超えた場合、既存の読み取り専用インスタンスはいずれも排除されません。

#### 読み取り専用インスタンスが破棄/返品された場合、マスターインスタンスにどのような影響がありますか？
読み取り専用インスタンスの破棄/返品は、マスターインスタンスに影響を与えません。
