## 작업 시나리오
끊김 없는 서비스와 높은 데이터 신뢰성이 요구되거나 관리 감독이 필요한 시나리오를 위해 TencentDB for MySQL는 리전 간 재해 복구 인스턴스를 제공하여 저렴한 비용으로 서비스 연속성과 데이터 신뢰성을 확보할 수 있게 도와줍니다.
>?재해 복구 인스턴스 요금과 프라이머리 인스턴스에 대한 내용은 [제품 가격](https://buy.intl.cloud.tencent.com/price/cdb)을 참고하십시오.

#### 기능 특징
- 독립된 데이터베이스 연결 주소를 제공합니다. 재해 복구 인스턴스는 읽기 액세스 기능을 제공할 수 있으며 근거리 액세스, 데이터 분석 등 시나리오에 사용되어 디바이스 이중화 비용을 절감할 수 있습니다.    
- 가용성 높은 프라이머리/세컨더리 아키텍처로 데이터베이스 단일 노드 구성으로 인한 리스크를 예방할 수 있습니다.
- 재해 복구 인스턴스는 내부 네트워크 전용 회선을 통해 동기화하여 동기화 딜레이 시간을 줄이고 안정성을 높일 수 있으며 외부 네트워크보다 우수한 품질의 동기화 링크를 제공합니다. 
- 현재는 프로모션 기간으로 전용 회선 트래픽을 무상으로 이용할 수 있습니다. 상용화 후 요금 부과 시 별도로 공지합니다. 

#### 작동 원리
- Tencent CDB를 재해 복구 데이터베이스로 사용하는 시나리오에서 재해 복구 인스턴스는 프라이머리 인스턴스 데이터베이스를 복사한 백업입니다.  
- 프라이머리 인스턴스에 변화가 발생하면 기록이 수정된 Log 정보는 재해 복구 인스턴스에 복사된 후 로그 리플레이를 통해 데이터가 동기화됩니다. 
- 프라이머리 인스턴스에 장애가 발생하면 몇 초 내에 재해 복구 인스턴스가 활성화되며 읽기/쓰기 기능이 완전히 복구됩니다.  

## 기능 제한
- 1GB 메모리, 50GB 디스크 및 그 이상의 사양과 더불어 MySQL 5.6 이상 버전 및 InnoDB 엔진 고가용성 버전의 프라이머리 인스턴스만 재해 복구 인스턴스를 구매할 수 있습니다. 프라이머리 인스턴스의 사양이 낮을 경우, 먼저 사양을 업그레이드하고 GTID 기능을 사전에 활성화하십시오. 
>?GTID를 활성화하지 않은 경우, [콘솔](https://console.cloud.tencent.com/cdb/) 인스턴스 상세 페이지에서 활성화할 수 있습니다. GTID 활성화는 시간이 많이 소요되며 인스턴스 연결이 몇 초 정도 끊길 수 있습니다. 피크 시간대를 피해 작업하시고 데이터베이스 액세스의 재연결 메커니즘을 확보할 것을 권장합니다. 
- 재해 복구 인스턴스의 최저 사양은 1GB 메모리, 50GB 디스크이며, 프라이머리 인스턴스에 사용된 스토리지 사양의 1.1배 이상이어야 합니다.
- 한 개의 프라이머리 인스턴스는 최대 한 개의 재해 복구 인스턴스를 생성할 수 있습니다. 격리 상태 중에는 재해 복구 인스턴스를 재생성할 수 없습니다.  
- 현재 재해 복구 인스턴스의 미지원 기능: 마이그레이션, 롤백, SQL 작업, 문자 세트 변경, 계정 관리, 포트 변경, 데이터 가져오기, 로그 롤백, 읽기 전용 인스턴스 기능.

## 작업 단계
### 재해 복구 인스턴스 생성
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb/)에 로그인한 후, 인스턴스 리스트에서 인스턴스 ID 또는 **작업** 열의 **관리**를 클릭하여 상세 페이지로 이동합니다.
2. 인스턴스 상세 페이지의 기본 정보에서 GTID 기능이 활성화 되어 있는지 확인하고, 인스턴스 아키텍처에서 **재해 복구 인스턴스 추가**를 클릭하여 재해 복구 인스턴스 구매 페이지로 이동합니다. 
![](https://qcloudimg.tencent-cloud.cn/raw/3535c0274c3dfa18134ccc735edd0f46.png)
3. 구매 페이지에서 재해 복구 인스턴스의 **과금 모드**, **리전**, **동기화 정책** 등 기본 정보를 설정합니다. 
 - 동기화 정책이 **즉시 동기화**일 경우 재해 복구 인스턴스를 생성하면 데이터가 바로 동기화됩니다. 
4. 오류가 없음을 확인한 후, **즉시 구매**를 클릭하고 재해 복구 인스턴스가 발송되길 기다립니다.
5. 인스턴스 리스트로 되돌아갑니다. 인스턴스 상태가 **실행 중**으로 변경되면, 후속 작업을 진행할 수 있습니다.

### 재해 복구 인스턴스 관리
- **재해 복구 인스턴스 조회**
재해 복구 인스턴스는 소속 리전에서 조회할 수 있으며 인스턴스 리스트에서 해당 리전의 전체 재해 복구 인스턴스를 필터링할 수 있습니다. 
![](https://qcloudimg.tencent-cloud.cn/raw/096486c7562d5385bfd50a187f85b307.png)
- **종속 관계 확인**
각 재해 복구 인스턴스 또는 프라이머리 인스턴스 우측의 이미지를 클릭하면 종속 관계를 확인할 수 있습니다. 
![](https://qcloudimg.tencent-cloud.cn/raw/89d342733d4c2264dd5dc00a1c7d4143.png)
![](https://qcloudimg.tencent-cloud.cn/raw/b403e312c47c98d79f1015c6e821082d.png)
- **동기화 딜레이 조회**
재해 복구 인스턴스의 인스턴스 상세 페이지 상단에서 프라이머리 인스턴스와 재해 복구 인스턴스 간의 동기화 딜레이를 확인할 수 있습니다. 
![](https://qcloudimg.tencent-cloud.cn/raw/053c38735dd3dd5b7e46d5c82687dd09.png)
- **재해 복구 인스턴스 기능**
재해 복구 인스턴스는 인스턴스 세부 사항, 인스턴스 모니터링, 백업 관리, 로그 슬로우 쿼리 기능을 제공합니다.  

### 재해 복구 인스턴스를 프라이머리 인스턴스로 업그레이드
재해 복구 인스턴스를 프라이머리 인스턴스로 전환해야 할 경우 콘솔에서 자체적으로 전환할 수 있습니다. 
1. [인스턴스 리스트](https://console.cloud.tencent.com/cdb)에서 프라이머리 인스턴스로 업그레이드할 재해 복구 인스턴스를 선택한 후, 인스턴스 ID를 클릭하면 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 우측 상단의 **프라이머리 인스턴스로 전환**을 클릭하면 재해 복구 인스턴스가 프라이머리 인스턴스로 업그레이드됩니다. 전환 후에는 기존 프라이머리 인스턴스와의 동기화 연결이 끊어지고 인스턴스 데이터베이스의 데이터 입력 기능과 MySQL 기능이 복구됩니다.
>!동기화 연결이 끊어지면 재연결할 수 없습니다. 작업 시 주의하십시오.
> 
![](https://qcloudimg.tencent-cloud.cn/raw/5eb3f1f08b46d4c20ab3b4038309ab03.png)

