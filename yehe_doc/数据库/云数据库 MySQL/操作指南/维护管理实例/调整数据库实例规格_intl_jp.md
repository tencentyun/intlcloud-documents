TencentDB for MySQLは、コンソールを介してインスタンス仕様の迅速な調整をサポートし、柔軟なスケーリング操作を提供します。ビジネスが置かれている実際の状況（ビジネス初期、ビジネス急成長期、ビジネスピーク時、ピークを外した時期など）に応じて、MySQLインスタンスの仕様を柔軟に調整することができ、リソースの活用やリアルタイムでのコスト最適化などのニーズを更に適切に満たします。調整料金の変更については、[インスタンス調整料金の説明](https://intl.cloud.tencent.com/document/product/236/32345)をご参照ください。

## インスタンスハードディスクの制限超過に関する説明
- お客様のビジネスが正常に行われるように、ディスク容量がほぼ一杯になったら、データベースインスタンスの仕様をアップグレードするか、ディスク容量の購入を適時行ってください。
>?ディスク容量については、[MySQLコンソール](https://console.cloud.tencent.com/cdb)のインスタンス詳細ページで確認できます。また、[アラートの設定](https://intl.cloud.tencent.com/document/product/236/8457)からタイムリーにハードディスクのアラート情報を受信することができます。
- インスタンスのストレージデータ量がインスタンスを超えると、インスタンスはロックされ、データの読み取りのみ可能で、書き込みはできなくなります。容量を拡張するか、コンソールで一部のデータベーステーブルを削除し、読み取り専用を解除する必要があります。
- データベースが繰り返しロック状態になることを避けるため、インスタンスの残容量が20%超または50GB超になった時のみ、インスタンスのロック状態が解除され、正常な読み取り/書き込み機能が回復します。

## グレード変更の説明
ユーザーがコンソールでインスタンス設定を変更すると、システムはデータ移行という方法により変更を完了させます。デフォルトでは通常グレード変更になります。ローカル（インスタンスが配置されているホスト）に十分なリソースが残っている場合は、高速グレード変更を選択することもできます。グレード変更手順は次のとおりです。
![](https://qcloudimg.tencent-cloud.cn/raw/8e7702c81886573a459dbf73b2846701.png)

- **通常グレード変更**：現在のホストのインスタンスデータを新しいホストのインスタンスに移行することでグレード変更が完了します。この期間中に、データの移行、データの比較・チェックを行う必要があります。データ量の規模が大きい場合、全体的なグレード変更には時間がかかります。また、設定の調整が完了すると、インスタンスの切り替えが必要になる場合もあります。
- **高速グレード変更**：データ移行なしで、現在のホスト上で設定を直接完了します。これによってデータ移行のための準備が減り、全体的なグレード変更にかかる時間が短くなります。
>!
>-残りのローカルリソースが十分にあり、高速グレード変更の条件を満たしている場合は、高速グレード変更機能がデフォルトで使用されます。使用する必要がない場合は、設定ページでオフにしてください。（グレード変更ページで「高速グレード変更」ボタンのオン/オフを選択できます）。

## 注意事項
- ROインスタンスが独立したVIPアクセスを有効にする場合、ROインスタンスは高速グレード変更をサポートしません。
- ROインスタンスが配置されているROグループ内の存続するインスタンスの数が、遅延除去インスタンスの最小数以下の場合、ROインスタンスは高速グレード変更をサポートしません。
- ROインスタンスが配置されているROグループにROインスタンスが1つしかない場合、このROインスタンスは高速グレード変更をサポートしません。
- グレード変更時、インスタンスのマイナーバージョンが最新でない場合、先にインスタンスのカーネルマイナーバージョンが最新にアップグレードされます。マイナーバージョンがアップグレードされた場合は、高速グレード変更機能によってインスタンスが再起動されます。再起動を伴うかどうかに関わらず、グレード変更ページの高速グレード変更のメッセージに従ってください。

## [設定ルールの調整](id:guize)
- TencentDB for MySQLインスタンスと、その関連する読み取り専用インスタンスと障害復旧インスタンスが正常な状態（実行中）で、現在実行中のタスクがない場合に、設定の調整操作を始めることができます。
- 設定の調整中は、この設定の調整操作をキャンセルすることはできません。
- 設定の変更前後で、インスタンスの名前、アクセスIP、アクセスポートはいずれも変更されません。
- 設定の変更中は、MySQLのグローバルパラメータやユーザーパスワードの変更などの操作をできる限り避けてください。
- 設定の変更中は、データの移行が発生することもありますが、その間もMySQLインスタンスは正常にアクセスでき、業務に影響はありません。
- 調整と設定の変更完了時に、インスタンスの切り替え（MySQLデータベースの接続が数秒間切断されること）が発生することがあります。プログラムの自動再接続機能を有効にし、インスタンスのメンテナンス可能時間を選択して切り替え実行することをお勧めします。[インスタンスのメンテナンス時間設定](https://intl.cloud.tencent.com/document/product/236/10929)をご参照ください。
- MySQL単一ノード - 基本型は、設定の調整中に、約15分間のインスタンス利用不可の状態があります。業務が落ち着いたタイミングで操作することをお勧めします。

## インスタンス仕様とストレージリスト
### 2ノード/3ノード（ローカルSSDディスク）
<table class="table-striped">
<tbody>
<tr><th>隔離ポリシー</th><th>CPUとメモリ</th><th>最大IOPS</th><th>ストレージ容量</th></tr>
<tr>
<td rowspan="14">汎用型</td>
<td>1コア1000MB</td><td>1200</td><td rowspan="10">25GB - 3000GB</td></tr>	
<tr>
<td>1コア2000MB</td><td>2000</td></tr>
<tr>
<td>2コア4000MB</td><td>4000</td></tr>
<tr>
<td>4コア8000MB</td><td>8000</td></tr>
<tr>
<td>4コア16000MB</td><td>14000</td></tr>
<tr>
<td>8コア16000MB</td><td>20000</td></tr>
<tr>
<td>8コア32000MB</td><td>28000</td></tr>
<tr>
<td>16コア32000MB</td><td>32000</td></tr>
<tr>
<td>16コア64000MB</td><td>40000</td></tr>
<tr>
<td>16コア96000MB</td><td>40000</td></tr>
<tr>
<td>16コア128000MB</td><td>40000</td><td rowspan="4">25GB - 6000GB</td></tr>
<tr>
<td>24コア244000MB</td><td>60000</td></tr>
<tr>
<td>32コア256000MB</td><td>80000</td></tr>
<tr>
<td>48コア488000MB</td><td>120000</td></tr>
<tr>
<td rowspan="26">専用型</td>
<td>2コア16000MB</td><td>8000</td><td rowspan="7">25GB - 3000GB</td></tr>	
<tr>
<td>4コア16000MB</td><td>10000</td></tr>
<tr>
<td>4コア24000MB</td><td>13000</td></tr>
<tr>
<td>4コア32000MB</td><td>16000</td></tr>
<tr>
<td>8コア32000MB</td><td>32000</td></tr>
<tr>
<td>8コア48000MB</td><td>36000</td></tr>
<tr>
<td>8コア64000MB</td><td>40000</td></tr>
<tr>
<td>12コア48000MB</td><td>36000</td><td rowspan="15">25GB - 6000GB</td></tr>
<tr>
<td>16コア64000MB</td><td>60000</td></tr>
<tr>
<td>12コア72000MB</td><td>40000</td></tr>
<tr>
<td>12コア96000MB</td><td>48000</td></tr>
<tr>
<td>16コア96000MB</td><td>60000</td></tr>
<tr>
<td>24コア96000MB</td><td>72000</td></tr>
<tr>
<td>16コア128000MB</td><td>60000</td></tr>
<tr>
<td>32コア128000MB</td><td>80000</td></tr>
<tr>
<td>24コア144000MB</td><td>76000</td></tr>
<tr>
<td>24コア192000MB</td><td>80000</td></tr>
<tr>
<td>32コア192000MB</td><td>90000</td></tr>
<tr>
<td>48コア192000MB</td><td>120000</td></tr>
<tr>
<td>32コア256000MB</td><td>100000</td></tr>
<tr>
<td>48コア288000MB</td><td>140000</td></tr>
<tr>
<td>48コア384000MB</td><td>140000</td></tr>
<tr>
<td>64コア256000MB</td><td>150000</td><td rowspan="2">25GB - 9000GB</td></tr>
<tr>
<td>64コア384000MB</td><td>150000</td></tr>
<tr>
<td>64コア512000MB</td><td>150000</td><td rowspan="2">25GB - 12000GB</td></tr>
<tr>
<td>90コア720000MB</td><td>150000</td></tr>
</tbody></table>	

## コンソールでインスタンスの設定を調整
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb/)にログインし、インスタンスリストで、調整する必要があるインスタンスを選択して、**操作**列の**その他**>**設定の調整**を選択します。
2. ポップアップされたダイアログボックスで、調整後の設定を選択し、**提出**をクリックします。
>?
>- 残りのローカルリソースが十分にあるときは、高速グレード変更機能がトリガーされます。この場合、このページの**高速グレード変更**ボタンが有効になり、ユーザーはオン/オフを選択できます。
>![](https://main.qcloudimg.com/raw/c37bb99f0a2db0a9108c7068ad72ba7c.png)
>- 高速グレード変更シナリオの中には再起動を伴わないものがあり、その時点で送信されたグレード変更は、設定の調整が完了するとすぐに有効になります。下図に示すとおりです。
![](https://main.qcloudimg.com/raw/6f5e9ab54f270c0833f5545cccbc8c6d.png)
>
![](https://main.qcloudimg.com/raw/ef2bf519dabe88cb23b9c73993602b9b.png)

## APIでインスタンスの設定を調整
ユーザーはUpgradeDBInstanceインターフェースを使用してインスタンスの設定を調整することができます。[クラウドデータベースインスタンスの設定を調整]ent.com/document/product/236/15876)をご参照ください。

## よくあるご質問
#### データベースインスタンス仕様を調整すると、インスタンスに対してどのような影響がありますか。
- MySQLは、設定の変更中にデータの移行が行われますが、実行中にインスタンスのアクセスが影響を受けることはありません。移行完了後に切り替えが行われ、秒レベルの瞬断が起きます。業務に再接続機能が備わっていることを確認してください。
- MySQL単一ノード - 基本型は、設定の調整中に、約15分間のインスタンス利用不可の状態があります。業務が落ち着いたタイミングで操作することをお勧めします。

#### データベースのダウングレードができないのはなぜですか。
ストレージがハードディスクの最大容量を超過している可能性があります。まずデータをクリーンアップし、残りの空き容量を20%超または50G超にしてから、ダウングレード操作を行う必要があります。

#### コンソールの設定変更後、「アップグレード切り替え待ち」状態が表示されたままなのはなぜですか。
[コンソール](https://console.cloud.tencent.com/cdb)で設定を調整する際、選択した**切替時間**が**メンテナンス時間帯に切り替え**になっていると、すぐに切り替えることができません。
直ちに切り替えたい場合は、インスタンスリストの**操作**列で**今すぐ切り替え**をクリックします。切り替えには秒単位の瞬断がありますので、業務に再接続機能が備わっていることを確認してください。

#### インスタンス仕様を調整する際、アップグレードにはどのくらいの時間がかかりますか。
データベースのアップグレードの時間は、現在のデータベースのデータ量の大きさやデータレプリケーションの速度と関係します。具体的な時間を予測することはできません。
アップグレード中も現在のインスタンスの正常な使用に影響を与えることはありません。アップグレード完了後にVIPに切り替えた際、秒単位の短い切断が生じます。

#### インスタンス調整の進捗状況は、どこで確認できますか。
コンソールの[タスクリスト](https://console.cloud.tencent.com/mysql/task)でタスクの進捗を確認できます。

#### ディスク容量を使い切りそうな場合はどうすればいいですか。
ユーザーのハードディスク容量の使用率が85%以上になっています。不要なデータを削除するか、ハードディスク容量の拡張を検討することをお勧めします。[コンソール](https://console.cloud.tencent.com/cdb)（インスタンスリストの右側の**操作**列で**その他** > **設定の調整**を選択）からハードディスク容量を拡張できます。

#### インスタンスのメモリ拡張（ディスクの拡張）が高速グレード変更をサポートしていることを確認するにはどうすればよいですか。
グレード変更ページにおいて、高速グレード変更のスイッチ状態を確認することによって、高速グレード変更機能を使用できるかどうかを判断できます。使用する必要がない場合、手動でオフにすることができます。高速グレード変更の要件が満たされていない場合、この機能をオンにすることはできません。
![](https://main.qcloudimg.com/raw/0ecdc6d86e3727e7a688a559ce217d7d.png)

#### メモリまたはディスクを拡張すると、インスタンスのマイナーバージョンに影響を与えますか。
インスタンスのマイナーバージョンが最新でない場合、インスタンスのカーネルマイナーバージョンが最新にアップグレードされます。マイナーバージョンがアップグレードされると、高速グレード変更機能によってデータベースが再起動されます。

#### 高速グレード変更によってインスタンスが再起動しますか。
特定の状況下では、インスタンスが再起動します。再起動を伴うかどうかに関わらず、次の図に示すように、グレード変更ページの下に関連プロンプトが表示されます。
![](https://main.qcloudimg.com/raw/d97d2daa7cb8e5aa0924355c59bc4fc8.png)

>?そのうち、インスタンスのマイナーバージョンが最新であり、高速グレード変更機能がトリガーされた場合、グレード変更ディスクだけは再起動しません。

#### コンソールをアップグレードするとき、高速グレード変更であるかどうかを判断するにはどうすればよいですか。
グレード変更ページの**高速グレード変更**ボタンがオンになっているかどうかで判断できます。
![](https://main.qcloudimg.com/raw/0ecdc6d86e3727e7a688a559ce217d7d.png)

#### APIインターフェースが設定を変更したとき、それが高速グレード変更であるかどうかを判断するにはどうすればよいですか。
APIインターフェースは現在、移行という方法によるグレード変更のみをサポートしており、高速グレード変更の指定には対応していません。API機能は、後日提供される予定です。

#### データベースがグレード変更するとき、データベースパラメータは調整されますか。
innodb_buffer_pool_sizeパラメータは、設定の変更に適応するように調整されます。

#### データベースがグレード変更するとき、高速グレード変更がトリガーされると、パラメータは調整されますか。
通常グレード変更と同様、インスタンス仕様の変更に応じてパラメータが調整されます。

#### 高速グレード変更と通常グレード変更の違いは何ですか。
高速グレード変更はデータ移行の時間を短縮します。

