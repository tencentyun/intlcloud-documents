본 문서에서는 콘솔 클론 MySQL 인스턴스를 이용해서, 새로 구매한 MySQL 인스턴스에 사용자가 어떻게 빠르게 롤백할 수 있는지 소개합니다.

## 작업 시나리오
TencentDB for MySQL은 클론 인스턴스 기능을 제공하여 클론을 통해 인스턴스를 로그 백업 보관 시간의 임의의 시간으로 복구합니다. 또한 지정한 물리적 콜드 백업의 백업 세트로 복구할 수 있습니다. 클론은 사용자가 선택한 시간에 따라 백업 데이터를 통해 새 인스턴스를 생성합니다. 새 인스턴스를 인증한 후, 사용자는 다시 데이터를 [DTS](https://intl.cloud.tencent.com/document/product/571/13709)를 통해 원본 인스턴스로 이동시키거나 직접 클론한 새 인스턴스를 사용합니다.

#### 클론 방식
- 시간에 따른 클론: 인스턴스를 임의의 시간으로 복구하고, 시간의 선택 범위는 사용자가 설정한 로그 보관 시간으로 결정합니다.
- 백업 세트에 따른 클론: 인스턴스를 임의의 물리적 콜드 백업의 백업 세트로 복구하고, 백업 세트의 선택 범위는 사용자가 설정한 데이터 백업의 보관 시간으로 결정합니다.

#### 새 인스턴스 요금
- 새 클론 인스턴스 과금 방식은 종량제입니다. 종량제 소개와 요금은 [과금 개요](https://intl.cloud.tencent.com/document/product/236/18335)를 참조 바랍니다.
- 새 클론 인스턴스는 완전히 클론에 성공한 후 과금합니다.  

##  전제 조건
- 지원하는 인스턴스 버전: MySQL 이중 노드, 3중 노드
- 기존 인스턴스의 상태는 ‘실행 중’이여야 합니다. 
- 클론 방식을 ‘백업 세트’에 따른 클론으로 선택하면, 기존 인스턴스는 물리적 콜드 백업을 완료한 상태여야 합니다. 물리적 콜드 백업은 [콘솔](https://console.cloud.tencent.com/cdb)의 백업 리스트에서 조회할 수 있습니다.
- 계정 내 잔액은 0보다 커야 합니다.

##  주의 사항
- 새 클론 인스턴스의 디스크 용량은 클론할 데이터의 크기보다 커야 하고, 그렇지 않으면 클론에 실패합니다.
- 새 클론 인스턴스의 가용존, 데이터베이스 버전, 복사 방식, 디폴트 데이터베이스 매개변수는 기존 인스턴스와 동일해야 합니다.
- 클론 과정에서 새 클론 인스턴스는 콘솔 리스트에 표시되지 않고 클론 성공 후 표시됩니다.

- 작업 순서
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 뒤, 인스턴스 리스트에서 인스턴스 ID 혹은 '작업'열의 [관리]를 클릭하여 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 [백업 복구]>[데이터 백업 리스트] 페이지를 선택하여 왼쪽 상단의 [클론]을 클릭하거나 클론할 백업의 ‘작업’ 열에서 [클론]을 클릭합니다.
![](https://main.qcloudimg.com/raw/b53e3c4f249a5f22638c32f4c92c7f75.png)
3. 구매 페이지에서 클론 인스턴스의 클론 방식과 해당 설정을 선택합니다. 오류가 없는지 확인한 후 [즉시 구매]를 클릭합니다.
 - 지정 시간 복구: 기존 데이터베이스 인스턴스에서 구체적인 시간의 데이터베이스 인스턴스로 복구할 수 있습니다. 시간 선택 범위는 사용자가 설정한 로그 백업 보관 시간에 따라 결정합니다.
 - 백업 세트 복구: 지정한 백업 세트에서 새 인스턴스를 백업합니다. 백업 세트의 선택 범위는 사용자가 설정한 데이터 백업 보관 시간에 따라 결정합니다.
 >?백업 보관 시간은 [콘솔](https://console.cloud.tencent.com/cdb)의 백업 리스트에서 확인할 수 있습니다.
 >
![](https://main.qcloudimg.com/raw/f2fcdd5471326b60f6ee7ea8872f00bc.png)
4. 구매 성공 후 [백업 복구]>[클론 리스트] 페이지에서 클론 상세정보를 확인할 수 있습니다.
![](https://main.qcloudimg.com/raw/3b6a2781adafd4cbde550ea00f3898a8.png)
5. 인스턴스 클론 성공 후 인스턴스 리스트 페이지에서 구매한 인스턴스의 상세정보를 확인할 수 있습니다.

## 관련 문서
- 데이터베이스 단일 라이브러리 및 단일 테이블 레벨의 데이터베이스 복구는 [데이터베이스 롤백](https://intl.cloud.tencent.com/document/product/236/7276)을 참고 바랍니다.
- 자체구축 데이터베이스로의 데이터 복구는 [물리 백업을 사용하여 데이터베이스 복구](https://intl.cloud.tencent.com/document/product/236/31910) 및 [로직 백업으로 데이터베이스 복구](https://intl.cloud.tencent.com/document/product/236/31909)를 참고 바랍니다.

## 이슈 질문
#### 클론 과정 중 원본 인스턴스의 액세스에 영향을 주나요?
클론 프로세스는 기존의 백업 세트 및 COS에 업로드된 binlog를 사용하여 클론을 진행하므로 기존 인스턴스의 액세스에는 영향을 주지 않습니다. 
