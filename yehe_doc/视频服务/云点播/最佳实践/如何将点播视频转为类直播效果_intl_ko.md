가상 라이브 방송은 VOD의 재생 제어 능력을 바탕으로 VOD 파일에 ‘시청 시간 제한’ 및 ‘동시 시청 진행’ 두 가지 액세스 제어 기능을 추가하여 VOD 파일이 라이브 방송 수준의 효과를 내도록 해줍니다. VOD 파일을 생성한 뒤 지정된 라이브 방송 시간에 VOD 파일을 사용해 라이브 방송 수준의 배포가 가능해 라이브 방송의 리스크를 줄이고 비용을 절감할 수 있습니다.

## 기능 특징
- **저렴한 개발 비용**: VOD 비디오를 표준 라이브 방송으로 변환하여 배포하는 경우, OBS 소프트웨어를 통해 비디오를 라이브 방송 플랫폼으로 푸시하고 라이브 방송 시스템 전체에 연결해야 하기 때문에 개발 비용이 비쌉니다. 이에 비해 가상 라이브 방송은 VOD 내부에서 구현되기 때문에 트랜스 코딩과 링크 도용 방지 기능만 활성화하면 됩니다.
- **낮은 규정 위반 리스크**: 사용자가 가상 라이브 방송 기능을 사용하여 사전에 미리 VOD 파일을 심사하고 편집할 수 있어 라이브 방송 과정에서 발생할 수 있는 규정 위반 리스크를 효과적으로 줄여주며 규정에 맞지 않는 콘텐츠를 차단하여 라이브 방송의 품질을 높여줍니다.
- **간편하고 유연한 생성**:
	- 라이브 룸 없이도 언제든지 모든 비디오의 가상 라이브 방송 생성이 가능합니다.
	- 동시 접속 수 제한이 없으며, 방송 시작 시간을 지정하고 미리 시청 링크를 배포할 수 있습니다.

## 응용 시나리오
- 주로 비디오 녹화를 사전에 완료해야 하는 시나리오에 적용하며, 정해진 시간표에 따라 동시 시청이 가능합니다. 사용자는 시청 게이트를 미리 획득할 수 있으나 예정 시간 전에는 비디오를 시청할 수 없습니다.
- 온라인 교육 비디오, 라이브 파티 및 라디오와 텔레비전 등에서 흔히 볼 수 있으며, 가상 라이브 방송 진행 중에는 빨리 감기 기능을 사용할 수 없습니다.

## 사용 설명

### 사용 제한
가상 라이브 방송은 본질적으로 VOD에 속하므로 다음과 같이 LVB의 일부 기능들은 지원하지 않습니다.
- ‘한 회’의 가상 라이브 방송에 대한 데이터 통계를 지원하지 않습니다.
- ‘한 회’의 가상 라이브 방송의 시작과 종료를 감지할 수 없습니다.
- 현재 진행중인 가상 라이브 방송의 일시정지/종료를 지원하지 않습니다.
- 이미 배포된 가상 라이브 방송 링크를 비활성화할 수 없습니다.
- 비디오 콘텐츠의 동적 수정(예: 실시간 트랜스 코딩, 워터마크 추가 등)을 지원하지 않습니다.

### 용어 설명
**시청 허용 시간 제한**: 비디오 게이트를 미리 시청자에게 배포할 수 있으며, 시청자는 가상 라이브 방송 시작 전 또는 종료 후에는 시청할 수 없고 가상 라이브 방송 ‘진행’ 중에만 시청이 가능합니다.
**동시 시청 진행률**: 가상 라이브 방송 ‘진행’ 중에는 모든 사청자의 시청 진행률이 동기화(분 단위의 편차 존재)됩니다.


## 전제 조건
- Tencent Cloud 계정에 [가입](https://intl.cloud.tencent.com/register) 및 [로그인](https://intl.cloud.tencent.com/login/subAccount?s_url=https%3A%2F%2Fcloud.tencent.com)하고, 실명 인증을 완료해야 합니다. 실명 인증되지 않은 사용자는 중국 본토의 가상 라이브 인스턴스를 구매할 수 없습니다.
- Tencent Cloud CSS 및 VOD 서비스가 활성화되어 있어야 합니다. 서비스가 활성화되어 있지 않은 경우 [CSS 서비스](https://console.cloud.tencent.com/live/livestat)와 [VOD 서비스](https://console.cloud.tencent.com/vod/overview)를 활성화하십시오.
- 라이브 방송을 녹화합니다. 자세한 내용은 [라이브 방송 녹화 VOD 변환](https://intl.cloud.tencent.com/document/product/266/39562)을 참고하십시오.

## 실행 순서
### 1단계: 비디오를 VOD에 업로드
[VOD 콘솔](https://console.cloud.tencent.com/vod/media)(비관리자) 왼쪽 메뉴에서 [미디어 자산 관리]>[비디오 관리]를 선택하고 [비디오 업로드]를 클릭합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/fae7f0c7f7a7fba65da7a947903b58ad.png)
비즈니스 상황에 따라 적절한 방법을 선택하여 비디오 파일을 VOD에 업로드할 수 있습니다. 다양한 업로드 방식에 대한 내용은 [미디어 업로드 개요](https://intl.cloud.tencent.com/document/product/266/9760)와 [라이브 방송 녹화 VOD 변환](https://intl.cloud.tencent.com/document/product/266/39562)을 참고하십시오.

### 2단계: 비디오를 HLS[](id:HLS)로 트랜스 코딩
1. 가상 라이브 방송은 HLS 포맷을 사용해야 합니다. [트랜스 코딩 작업 시작](https://intl.cloud.tencent.com/document/product/266/33938)의 설명에 따라 업로드한 비디오를 HLS 포맷(구체적인 [트랜스 코딩 템플릿](https://intl.cloud.tencent.com/document/product/266/14059)은 비즈니스에 따라 선택하십시오)으로 트랜스 코딩할 수 있습니다.
2. 트랜스 코딩 완료 후, 콘솔의 [미디어 자산 관리](https://intl.cloud.tencent.com/document/product/266/33895)에서 HLS의 URL을 조회하거나 [이벤트 공지](https://intl.cloud.tencent.com/document/product/266/33938)를 수신하는 방식으로 HLS의 URL을 가져올 수 있습니다.
![](https://qcloudimg.tencent-cloud.cn/raw/ca003d8a162fb814938888b5678e6f33.png)

### 3단계: Key 링크 도용 방지 활성화
1. 가상 라이브 방송은 반드시 링크 도용 방지를 활성화해야 합니다. [VOD 콘솔](https://console.cloud.tencent.com/vod)에 로그인하고 왼쪽 메뉴의 [배포 및 재생 설정]>[도메인 관리]를 선택한 뒤 타깃 도메인이 있는 행의 [설정]을 클릭하면 도메인 관련 설정 화면으로 이동합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/f21443e506aab6c9020d4a98575c1e7b.png)
2. [편집]을 클릭하여 Referer 링크 도용 방지를 활성화합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/e4fecb5f16b4157959b86acbc9d33ee0.png)
2. Referer 링크 도용 방지, Key 링크 도용 방지를 활성화합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/7f13f03767df78e476012158fb44eebd.png)
옵션에 관한 더 자세한 내용은 [링크 도용 방지 설정](https://intl.cloud.tencent.com/document/product/266/14060)을 참고하십시오. 설정이 완료되면 링크 도용 방지 KEY의 내용을 저장하고 다음의 링크 도용 방지 서명 계산에 사용합니다.

### 4단계: 링크 도용 방지 서명 계산
#### 서명 계산 공식[](id:function)
```plaintext
sign = md5(KEY + Dir + t + plive + exper + rlimit + us)
```
>!가상 라이브 방송의 링크 도용 방지 매개변수는 [표준 Key 링크 도용 방지](https://intl.cloud.tencent.com/document/product/266/33986) 매개변수에 `plive`가 추가되었습니다. 링크 도용 방지 서명 계산 시, `plive`를 넣어 계산해야 합니다.

| 매개변수 이름 | 값                  | 설명                                               |
| ------ | ---------------------- | -------------------------------------------------- |
| KEY    | 11111111| 개발자가 Key 링크 도용 방지를 활성화할 때 선택하는 보안키입니다.                  |
| Dir    | /dir1/dir2/          | 원본 재생 URL의 PATH에서 myVideo.mp4를 뺀 나머지 부분입니다. |
| t      | 5a71afc0             | 만료된 타임스탬프 1517400000을 16진법으로 나타낸 결과입니다.             |
|plive|5e344f00|해당 회차 가상 라이브 방송의 시작 시간(중국 표준시)으로, UNIX 타임스탬프 형식으로 표시됩니다. 예를 들어, 1577808000는 2020-01-01 00:00:00을 의미합니다. |
|exper|0|미리보기 시간으로, 0은 시간 제한이 없음을 의미합니다. |
|rlimit|0|시청 IP 수 제한으로, 0은 제한이 없음을 의미합니다. |
| us     | test| 생성된 랜덤 문자열입니다.                                   |


예를 들어, 개발자가 VOD 상에 가지고 있는 비디오의 HLS URL (원본 비디오의 URL이 아님) 재생 주소가 `http://1250000000.vod2.myqcloud.com/vodtranscq125000000/12345678/v.f240.m3u8；`인 경우, 요구사항은 다음과 같습니다.
- HLS URL 링크 도용 방지 KEY가 `11111111`이어야 합니다.
- 유효 기간 만료시간 t가 `5e5a8a80`(즉 2020-03-01 00:00:00)이어야 합니다.
- 가상 라이브 방송 시작 시간 plive가 `5e344f00`(즉 2020-02-01 00:00:00)이어야 합니다.
- 미리보기 시간 exper가 `0`(즉, 무제한)이어야 합니다.
- 시청 IP 수 제한 rlimit가 0(즉, 무제한)이어야 합니다.
- 랜덤 문자열 us가 `test`이어야 합니다.


1. [서명 계산 공식](#function)에 따라 서명을 계산합니다.
```plaintext
sign = md5(11111111/vodtranscq125000000/12345678/5e5a8a805e344f0000test) = 0af5018df88c00e6629e0fb8939277dd
```
2. HLS URL의 QueryString에 생성된 서명을 추가하여 최종 링크 도용 방지 URL을 가져옵니다.
```plaintext
http://1250000000.vod2.myqcloud.com/vodtranscq125000000/12345678/v.f240.m3u8?t=5e5a8a80&plive=5e344f00&exper=0&rlimit=0&us=test&sign=0af5018df88c00e6629e0fb8939277dd
```

>?
>- QueryString의 매개변수는 `sign` 계산과 동일한 순서로 계산되어야 합니다: `t-plive-exper-rlimit-us-sign`.
>- 개발자의 디버깅을 용이하게 하기 위해 [링크 도용 방지 서명 생성 툴 페이지](https://vods.cloud.tencent.com/referer/gen_video_url.html)를 제공합니다. 페이지 내용에 따라 매개변수를 입력한 후, 서명 계산의 중간 결과와 최종 링크 도용 방지 링크를 볼 수 있습니다.

### 가상 라이브 방송 체험
HLS 재생을 지원하는 플레이어(예: Safari 브라우저, VLC, PotPlayer 등)에서 앞서 언급한 링크 도용 방지 링크에 액세스하면 바로 체험해 볼 수 있습니다.
>!Chrome 브라우저는 기본적으로 HLS를 지원하지 않으므로 플러그인을 설치해야 합니다.
