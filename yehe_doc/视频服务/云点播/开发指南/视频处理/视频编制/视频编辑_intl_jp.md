ビデオ編集は、VODの中のビデオに対してトリミングとスプライシングを行うプロセスであり、オフラインタスクです。ビデオ編集の機能には以下の種類があります。

* **ビデオトリミング**：VODの中の1つのファイルに対してトリミングを行い、1つの新しいビデオを生成します。
* **ビデオスプライシング**：VODの中の複数のファイルに対してスプライシングを行い、1つの新しいビデオを生成します。
* **ビデオトリミング後のスプライシング**：VODの中の複数のファイルに対してトリミングを行ってから、スプライシングを行い、1つの新しいビデオを生成します。
* **LVBストリームからのビデオ変換**：VODの中の1つのストリームに対して処理を行い、1つの新しいビデオを生成します。
* **LVBストリームからのトリミング**：VODの中の1つのストリームに対してトリミングを行い、1つの新しいビデオを生成します。
* **LVBストリームのスプライシング**：VODの中の複数のストリームに対してスプライシングを行い、1つの新しいビデオを生成します。
* **LVBストリームのトリミング後のスプライシング**：VODの中の複数のストリームに対してトリミングを行ってから、スプライシングを行い、1つの新しいビデオを生成します。

>!LVBストリームに対してトリミング、スプライシングなどの操作を行なう時は、必ずストリーミングが終了してから操作してください。そうしない場合、生成したビデオが不完全なものになる可能性があります。

編集後に生成される新しいビデオのコンテナ形式はMP4です。編集の発動時に、生成する新しいビデオに対して [タスクフロー](https://intl.cloud.tencent.com/document/product/266/33931)を実行するか指定することができます。

## タスクの開始

ビデオ編集タスクは、[サーバーAPI](https://intl.cloud.tencent.com/document/product/266/34126) 方式により開始されます。APIの呼び出しで戻される結果の中にタスクIDが含まれ、これを [結果の取得](#.E7.BB.93.E6.9E.9C.E8.8E.B7.E5.8F.96) 時の対応するタスクの結果とのバインドに使用します。

## 結果の取得

タスクの開始後、非同期の[結果通知](https://intl.cloud.tencent.com/document/product/266/33931) または同期の [タスク確認](https://intl.cloud.tencent.com/document/product/266/33931#TaskQuery) 方式でビデオ編集の実行結果を取得できます。以下は、ビデオ編集タスクの開始後、通常のコールバック方式での結果通知の例となります（値がnullのフィールドは省略）。

```json
{
    "EventType":"EditMediaComplete",
    "EditMediaCompleteEvent":{
        "TaskId":"EditMedia-f5ac8127b3b6b85cdc13f237c6005d8",
        "Status":"FINISH",
        "ErrCode":0,
        "Message":"SUCCESS",
        "Input":{
            "InputType":"File",
            "FileInfoSet":[
                {
                    "FileId":"24961954183381008",
                    "StartTimeOffset":0,
                    "EndTimeOffset":300
                },
                {
                    "FileId":"24961954183381009",
                    "StartTimeOffset":0,
                    "EndTimeOffset":300
                },
                {
                    "FileId":"24961954183381010",
                    "StartTimeOffset":0,
                    "EndTimeOffset":300
                }
            ]
        },
        "Output":{
            "FileType":"mp4",
            "FileId":"24961954183923290",
            "FileUrl":"http://125676836723.vod2.myqcloud.com/xxx/xxx/f0.mp4"
        },
        "ProcedureTaskId":""
    }
}
```

コールバックの結果の中で、`Input.InputType`は`File`であり、編集したビデオがファイルタイプであることを表しています。`Input.FileInfoSet`には3つのエレメントが含まれ、そのうちの`StartTimeOffset`は`0`、`EndTimeOffset`は`300`となっています。これは3つのビデオに対して各々最初の5分間のフィルムをトリミングしてからスプライシングを行い、スプライシング後のビデオの長さが15分間であることを表しています。`Output.FileId`はビデオ編集後に生成される新しいビデオのFileIdです。ビデオの再生URLは`FileUrl`の中の値です。
