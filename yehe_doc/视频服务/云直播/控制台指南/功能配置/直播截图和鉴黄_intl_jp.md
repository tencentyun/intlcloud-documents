CSSはスクリーンキャプチャ・ポルノ検出機能を提供します。コンソールで設定したスクリーンキャプチャ・ポルノ検出テンプレートによって、プッシュドメイン名をテンプレートに関連付けてからプッシュ中にCSS画面をキャプチャし、スクリーンショットまたはポルノ検出データをTencent CloudのCloud Object Storageに保存することをサポートします。このプッシュドメイン名がコールバック設定に関連付けられている場合は、ライブストリーミング中にコールバックイベントが発生すると、Tencent Cloudはクライアントに自発的にリクエストを送信します。クライアントはリクエストに応答します。認証に成功すると、ポルノ検出コールバックメッセージを含んだJSONパケットを取得できます。
ここでは、コンソールでスクリーンキャプチャ・ポルノ検出テンプレートを作成、バインド、バインド解除、変更、削除する方法をご紹介します。

そのうち、スクリーンキャプチャ・ポルノ検出テンプレートの作成には以下の2種類の方式があります：

- CSSコンソールによるテンプレートの作成。操作手順の詳細は[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)をご参照ください。
- APIによるテンプレートの作成。具体的なパラメータおよびサンプルの説明については、[スクリーンキャプチャテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/30834)をご参照ください。

## 注意事項

- スクリーンキャプチャ機能は単独で有効にして使用できますが、ポルノ検出機能はスクリーンキャプチャ機能と合わせて使用する必要があります。
- スクリーンキャプチャとポルノ検出は課金対象機能です。有効になっている場合、スクリーンキャプチャ機能は1000枚ごとに0.0176米ドルで、ポルノ検出機能は1000枚ごとに0.2294米ドルで課金されます。詳細については、[ポルノ検出](https://intl.cloud.tencent.com/document/product/267/39607)をご参照ください。  
- スクリーンショットとポルノ検出の画像はご利用のCloud Object Storage（COS）保存されるため、 COS保存料金が発生します。詳細については、[COS製品の料金設定](https://intl.cloud.tencent.com/pricing/cos)をご参照ください。
- 単純なオーディオストリームの場合、スクリーンキャプチャに失敗するため、スクリーンキャプチャ料金は発生しません。
- スクリーンショットを**その他のアカウント**のCOS bucketに保存する場合、事前にCOS bucketでCSSサービスにデータを書き込む権限を付与する必要があります。詳細については、[スクリーンキャプチャを保存するためにCSSへのCOS Bucket承認](https://intl.cloud.tencent.com/document/product/267/33384)をご参照ください。
- COS Bucketへのアクセス権限がパブリック読取りで、Bucketにポルノ、政治及びその他の禁令違反に関するスクリーンキャプチャが存在する場合、COS Bucketからこれらの画像を削除し、COS Bucketが禁止され利用に支障が出ることを回避することをお勧めします。
- テンプレート作成完了後、プッシュドメイン名に関連を付けることができます。関連ドキュメントについては、 [スクリーンキャプチャ・ポルノ検出設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。テンプレートに関連を付けて約5分～10分後に、設定が反映されます。 
- コンソールのスクリーンキャプチャ・ポルノ検出テンプレートはドメイン名で管理されます。現在、関連付けられたインターフェースで作成したルールを取り消すことができません。スクリーンキャプチャ・ポルノ検出関連のインターフェースで指定したストリームと関連を付けた場合、 [スクリーンキャプチャルールの削除](https://intl.cloud.tencent.com/document/product/267/30833)を呼び出して、関連付けを解除する必要があります。
- テンプレートのバインド、変更、バインド解除はいずれも更新後のライブストリーミングにのみ影響し、すでにライブストリーミング中のストリームは影響を受けません。ライブストリーミング中のストリームに新しいルールを適用するには、一度切断して再度プッシュする必要があります。

## 使用前提
- Tencent CSSサービスが有効化され、[プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)が追加されていること。
- COS Bucketが作成されていること。詳細については、[バケットの作成](https://intl.cloud.tencent.com/document/product/436/13309)をご参照ください。

[](id:Screenshot)
## スクリーンキャプチャ・ポルノ検出テンプレートの作成
1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. **スクリーンキャプチャ・ポルノ検出テンプレートの作成**クリックしてください。CSSスクリーンキャプチャ・ポルノ検出サービスでは、スクリーンショットをCOSバケットに保存する必要があるため、**初めて**スクリーンショット・ポルノ検出テンプレートを作成するには、サービスロールを作成し、CSSにCOSの読み取り/書き込み権限を付与する必要があります。クリックしてCAMへ進んで権限を付与します。
![](https://qcloudimg.tencent-cloud.cn/raw/f27be286a9f3c68d96a55544a6c25b57.png)
3. 権限付与が完了した後、設定項目を入力し、**保存**をクリックすれば完了です。
<img src="https://qcloudimg.tencent-cloud.cn/raw/6ecf7c0591d97bdd525e0419e1a5da5c.png" style="zoom:67%;" />

<table>
<thead><tr><th width="15%">設定項目</th><th>説明</th></tr></thead>
<tbody><tr>
<td>テンプレート名</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレート名。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。30文字を超えないこと。</td>
</tr><tr>
<td>テンプレートの説明</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレートの説明。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。100文字を超えないこと。</td>
</tr><tr>
<td>スクリーンキャプチャ間隔</td>
<td>プッシュ中の自動スクリーンキャプチャの時間間隔です。デフォルトでは2秒です。値の範囲は2秒～300秒です。</td>
</tr><tr>
<td>ポルノ検出の有効化</td>
<td>ポルノ検出機能を有効にするかを選択できます。ポルノ検出を有効にした場合、ポルノ検出の結果を取得するには、コールバックを設定する必要があります。</td>
</tr><tr>
<td>ストレージアカウント</td>
<td><b>現在のアカウント</b>または<b>他のアカウント</b>を選択できます。</td>
</tr><tr>
<td>AppId</td>
<td>ストレージアカウントタイプが<b>その他のアカウント</b>の場合のみ入力する必要があります。APPIDの情報はその他のアカウントの<a href="https://console.cloud.tencent.com/developer">アカウント情報</a>から取得します。その他のアカウントのCOS bucketに保存する場合、事前にCOS bucketでCSSサービスにデータの書き込み権限を付与する必要があります。詳細については、<a href=" https://intl.cloud.tencent.com/document/product/267/33384">スクリーンキャプチャを保存するためにCSSへのCOS Bucket承認</a>をご参照ください。
    </td>
</tr><tr>
<td>Bucket</td>
    <td><b>COS</b>で作成して権限を付与したCOS bucketを選択します。</td>
</tr><tr>
<td>Region</td>
<td>前述のBucketが所在するリージョン情報で、変更できません。</td>
</tr><tr>
<td>フォルダ</td>
<td>選択ボックスをクリックして、COSフォルダを選択します。デフォルトは<code>{Year}-{Month}-{Day}/</code>です。<br>説明：COSフォルダ名には[a-z、A-Z、0-9]、記号<code>-，!，_，.，*</code>およびプレースホルダーのみ使用できます。</td>
</tr><tr>
<td>ファイル名</td>
<td><ul style="margin:0"><li>スクリーンショットファイル名の形式で、パラメータを自由に組み合わせて作成できます。デフォルトは<code>{StreamID}-screenshot-{Hour}-{Minute}-{Second}-{Width}x{Height}{Ext}</code>です。そのうち、
			<ul style="margin:0">
					<li>{AppName｝：プッシュAppName</li>
					<li>{PushDomain｝：プッシュドメイン名</li>
					<li>{StreamID} ：ストリームID</li>
					<li>{Year}：スクリーンキャプチャ時間（年）</li>
					<li>{Month}：スクリーンキャプチャ時間（月）</li>
					<li>{Day}：スクリーンキャプチャ時間（日）</li>
					<li>{Hour}：スクリーンキャプチャ時間（時）</li>
					<li>{Minute}：スクリーンキャプチャ時間（分）</li>
					<li>{Second}：スクリーンキャプチャ時間（秒）</li>
					<li>{Width}：画像幅</li>
					<li>{Height}：画像高さ</li><li>{Ext}：拡張子（.jpg）</li>
			</ul>
		<li><b>説明：</b>[a-z、A-Z、0-9]、記号(-、!、_、.、*)およびプレースホルダーのみが使用できます。</li>
    <li><b>例：</b>ファイル名の形式が<code>{Year}-{Month}-{Day}- {Hour}-{Ext}</code>である場合、2020年01月01日14:00:00にCSS画面を自動的にキャプチャし、COSに保存した時のファイル名は<code>2020010114.jpg</code>となります。</li></ul></td>
</tr>
</tbody></table>

[](id:conect)
## ドメイン名のバインド

1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 以下の方法でドメイン名をバインドするウィンドウに入ります。
    - **ドメイン名との直接バインド：**左上にある**ドメイン名のバインド**をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/92b7542783d6d5ac59ef5faedbf53746.png)
    - **新規スクリーンキャプチャ・ポルノ検出テンプレート作成完了後のドメイン名バインド：**[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)が完了した後、プロンプトボックスの中の**ドメイン名のバインドへ**をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/61c40816a357ce0f79677e238a1a31ba.png)
1. ドメイン名バインドウィンドウで、バインドする**スクリーンキャプチャ・ポルノ検出テンプレート**および**プッシュドメイン名**を選択し、**OK**をクリックすればバインドが完了します。
![](https://qcloudimg.tencent-cloud.cn/raw/5e632f4a7712256fdd3f3a282e09a9c7.png)
> ? **追加**をクリックして現在のテンプレートに複数のプッシュドメイン名をバインドすることをサポートします。

[](id:unite)
## バインドの解除

1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. ドメイン名にバインドしているCSSスクリーンキャプチャ・ポルノ検出テンプレートを選択し、**バインド解除**をクリックします。
 ![](https://qcloudimg.tencent-cloud.cn/raw/e8a52af13916db8d50bc4395cfc5cc8d.png)
3. バインドしているドメイン名をバインド解除するかを確認して、**OK**をクリックすればバインドが解除されます。
 ![](https://main.qcloudimg.com/raw/9182f6589885ecba5fafcea075c9184e.png)

[](id:change)
## テンプレートの変更

1. **機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択し、右側の**編集**をクリックすれば、テンプレートの情報を変更できます。
3. **保存**をクリックすれば完了です。

![](https://qcloudimg.tencent-cloud.cn/raw/786b4fd9630a178a0aebb65cda16a49c.png)

[](id:delete)
## テンプレートの削除
>! テンプレートがすでにバインドされている場合は、先に[バインドの解除](#unite)を行ってから、削除を行うことができます。

1. **機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択して、上にある削除ボタンをクリックします。
3. 現在のスクリーンキャプチャ・ポルノ検出設定テンプレートを削除するかを確認し、**OK**をクリックすれば削除されます。

![](https://main.qcloudimg.com/raw/6ae7a299517803a92776d8077ccda1d3.png)

## 関連操作
**ドメイン名によるスクリーンキャプチャ・ポルノ検出テンプレートのバインド**と**バインド解除**の具体的な操作および関連説明については、[スクリーンキャプチャ・ポルノ検出設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。
