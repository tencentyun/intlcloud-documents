This document describes how to create a simple edge function and use the function to redirect a request to another URL and return the custom response header.

## Preparations
- Edge functions belong to sites. To use an edge function, you must first create a site. For more information, see [Adding a Site](https://intl.cloud.tencent.com/document/product/1145/45966).
- (Optional) After the site is created, you can create a subdomain for function testing at this site. For more information, see [NS Connection](https://intl.cloud.tencent.com/document/product/1145/46353).

## Step 1: Creating and Deploying a Function
1. Log in to the [EdgeOne console](https://console.cloud.tencent.com/edgeone) and choose **Edge function** > **Function Management** on the left sidebar.
2. On the **Edge function** page, click **Create function**.
3. On the **Create edge function** page, configure the parameters and click **Create and deploy**.
![](https://qcloudimg.tencent-cloud.cn/raw/5fe82c01af4e9fef330979bdb9eff642.png)
Parameters:
 - Function: (Required) Example: test-edgefunctions.
 - Description: (Optional) Example: Custom HTML page and response header.
 - Code: Copy the following function code and paste it into the code editor in the console to replace the default code:

```typescript
const html = `
  <!DOCTYPE html>
  <body>
    <h1>Hello World</h1>
    <p>This markup was generated by TencentCloud Edge Functions.</p>
    <a href="https://intl.cloud.tencent.com/product/teo">Tencent Cloud EdgeOne</a>
  </body>
`;

async function handleRequest(request) {
  return new Response(html, {
    headers: {
      'content-type': 'text/html; charset=UTF-8',
      'x-edgefunctions-test': 'Welcome to use Edge Functions.',
    },
  });
}

addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request));
});
```

>? The preceding code creates a custom HTML and adds the following custom response header: x-edgefunctions-test: Welcome to use Edge Functions.

4. If you see the following pop-up dialog box, the deployment is successful.
<img src="https://qcloudimg.tencent-cloud.cn/raw/0eebbfc5ea14ee87b7b82f171b45058d.png" style="zoom:80%;" />

## Step 2. Configuring a Triggering Rule
1. After the function is deployed successfully, click **Add triggering rule**.
2. On the **Add triggering rule** page, select "HOST" from the Matching type drop-down list and "Equal to" from the Operator drop-down list, enter the created subdomain in the Value field, and then click **OK**.  
![](https://qcloudimg.tencent-cloud.cn/raw/591887be4af5eedf1a4a999f0df9901e.png)

## Step 3: Verifying the Edge Function
### Prerequisites
1. You have created a site in Activated status and a subdomain for testing the edge function at this site.
2. You have created the edge function.
3. You have created the triggering rule.

### Verification method
To check whether the function can work as expected, you can initiate a request in a browser or by using Curl.
- **Verification in a browser**: In the address bar, enter a URL that matches the specified triggering rule and press Enter to trigger the execution of the function.

![](https://qcloudimg.tencent-cloud.cn/raw/fea4b02586c48aa7d265d89e96590be5.png)

- **Verification by using Curl**

![](https://qcloudimg.tencent-cloud.cn/raw/a4afb0f5640685994035e53a1e9483e1.png)

## (Optional) Step 4: Editing the Edge Function
1. If the deployed function does not meet your expectations, go to the [Edge function](https://console.cloud.tencent.com/edgeone/edgefunctions) page, find the function, and then click **Details**.
2. On the function information page, click **Edit**, modify the code, and then click **Save and deploy**.
![](https://qcloudimg.tencent-cloud.cn/raw/272ed6f219fc0bfa170b495d7813fbe5.png)
3. Click **Deploy** as prompted to redeploy the function.<br><img src="https://qcloudimg.tencent-cloud.cn/raw/6b21c3652ed4d2c6c4f6a2394fb75a62.png" width=650px>
