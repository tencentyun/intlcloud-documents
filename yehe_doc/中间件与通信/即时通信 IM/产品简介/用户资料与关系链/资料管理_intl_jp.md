## プロフィールシステムの紹介
IMはユーザープロフィールホスティング機能を開放し、プロフィール関連のワンストップソリューションを提供します。各ユーザーに独自のプロフィールを持たせ、プロフィールを簡単に設定およびプルできるようにする場合は、IMのプロフィールホスティングサービスを選択できます。
- IMは、プロフィールの保存機能を提供し、お客様のデータのリモート障害復旧、マルチサイトデプロイおよび自動スケーリングといった機能を確保します。サーバーのダウンタイム、マルチマスター/スレーブレプリケーション、スケーリングなどの処理をお手伝いし、お客様は複雑な処理フローから完全に解放されます。
- IMは、業界共通の業務処理フローを提供し、お客様がユーザープロフィールの業務ロジックから完全に解放されるようお手伝いします。
- IMは、プロフェッショナルな運営フローと運営チームを提供し、年間を通じて99.99％という安定したサービス品質をお約束し、ユーザーに評判の高い安定したサービスを提供するお手伝いをします。
- IMは、使いやすいサービスインターフェースとクイックアクセスヘルプガイドを提供し、プロセス全体で優れたサービスを提供します。

IMのプロフィールホスティングサービスにより、次の機能を利用できます：
- 標準プロフィールフィールドの保存、読み取り/書き込み機能。
- カスタムプロフィールフィールドの保存、読み取り/書き込み機能。

## プロフィールフィールド
プロフィールは、ユーザー属性を記述するために使用されるデータのセットです。IMプロフィールシステムでは、標準プロフィールフィールドとカスタムプロフィールフィールドがサポートされています。プロフィールフィールドには次の特徴があります：
- プロフィールフィールドはKey-Valueで表されます。
- KeyはString型、命名にはアルファベット大文字・小文字、数字、アンダーバーのみサポートしています。
- Valueには次のタイプがありま：
   a. uint32_t型の整数（カスタムプロフィールフィールドではサポートされていません）。
   b. uint64_t型の整数（カスタムプロフィールフィールドではサポートされていません）。
   c. string型の文字列（stringの長さは500バイトを超えてはなりません）。
   d. bytes型のbuffer（bufferの長さは500バイトを超えてはなりません）。

- 各Keyの読み取り/書き込み権限の設定がサポートされています。プロフィールフィールドの読み取り/書き込み権限は次のとおりです：

<table style="display:table;width:100%">
		<tbody>
			<tr>
			<th style="width:20%;">権限名</th>
				<th style="width:30%;">権限タイプ</th>
				<th>備考</th>
			</tr>
			<tr>
				<td>読み取り権限</td>
				<td>
					App読み取り可能<br>
					App管理者が読み取り可能<br>
				</td>
				<td>1つ以上のタイプの読み取り権限を選択できます</td>
			</tr>
			<tr>
				<td>書き込み権限</td>
				<td>
					App書き込み可能<br>
					App管理者が書き込み可能<br>
				</td>
				<td>1つ以上のタイプの書き込み権限を選択できます</td>
			</tr>
		</tbody>
	</table>

## 標準プロフィールフィールド

現在、IMでサポートされている標準プロフィールフィールドは次のとおりです：

<table style="display:table;width:100%">
		<tbody>
			<tr>
			<th style="width:15%;">フィールド名</th>
				<th style="width:5%;">タイプ</th>
				<th style="width:10%;">説明</th>
				<th style="width:19%;">更新時にPushがあります</th>
				<th>備考</th>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Nick</td>
				<td>string</td>
				<td>ニックネーム</td>
				<td>あり</td>
				<td>長さは500バイトを超えてはなりません</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Gender</td>
				<td>string</td>
				<td>性別</td>
				<td>あり</td>
				<td>
					Gender_Type_Unknown：性別が未設定<br>
					Gender_Type_Female：女性<br>
					Gender_Type_Male：男性<br>
				</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_BirthDay</td>
				<td>uint32</td>
				<td>生年月日</td>
				<td>あり</td>
				<td>お勧めの設定形式：20190419</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Location</td>
				<td>string</td>
				<td>所在地</td>
				<td>あり</td>
				<td>
					長さは16バイトを超えてはなりません。お勧めの設定形式は次のとおりです。<br>
					Appで、数字と地名の間のマッピング関係をローカルで定義します<br>
					実際には、バックグランドに保存されているものはuint32_t型の4つの数字です<br>
					そのうち、最初のuint32_tは国を表します<br>
					2番目のuint32_tは都道府県を表します<br>
					3番目のuint32_tは都市を表します<br>
					4番目のuint32_tは市区町村を表します<br>
				</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_SelfSignature</td>
				<td>string</td>
				<td>自己紹介</td>
				<td>あり</td>
				<td>長さは500バイトを超えてはなりません</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_AllowType</td>
				<td>string</td>
				<td>友達追加の認証方法</td>
				<td>あり</td>
				<td>
					AllowType_Type_NeedConfirm：相手が友達への追加を行う際に、自分からの確認が必要です<br>
					AllowType_Type_AllowAny：すべてのユーザーによる友達への追加を許可します<br>
					AllowType_Type_DenyAny：すべてのユーザーによる友達への追加を許可しません<br>
				</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Language</td>
				<td>uint32</td>
				<td>言語</td>
				<td>あり</td>
				<td>Appの数字と言語の間のマッピング関係をローカルで定義するには、Appの言語に対応する数字をローカルでテキストに変換する必要があります。</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Image</td>
				<td>string</td>
				<td>プロフィール写真のURL</td>
				<td>あり</td>
				<td>長さは500バイトを超えてはなりません</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_AdminForbidType</td>
				<td>string</td>
				<td>管理者が友達への追加を禁止することを示すマーク</td>
				<td>あり</td>
				<td>
					AdminForbid_Type_None：デフォルト値であり、友達への追加を許可します<br>
					AdminForbid_Type_SendOut：当該ユーザーが友達リクエストを送信することを禁止します<br>
				</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Level</td>
				<td>uint32</td>
				<td>レベル</td>
				<td>あり</td>
				<td>通常、1つのUINT-8データで1つのレベル情報を保存できます。<br>複数のロールのレベル情報を実現するために、分割保存する方法を考慮できます。</td>
			</tr>
			<tr>
				<td>Tag_Profile_IM_Role</td>
				<td>uint32</td>
				<td>ロール</td>
				<td>あり</td>
				<td>通常、1つのUINT-8データで1つのロール情報を保存できます。<br>複数のロール情報を保存するために、分割保存する方法を考慮できます。</td>
			</tr>
		</tbody>
	</table>

## カスタムプロフィールフィールド
カスタムプロフィールフィールドは、各Appによって各自の業務ニーズに応じて設定されたユーザーデータです。プロフィールフィールドをカスタマイズすることで、各Appはユーザープロフィールにデータを追加することができるほか、既存インターフェースを介して、読み取り/書き込み操作を行うことができます。

## カスタムプロフィールフィールドの申請
App管理者は、IM[コンソール](https://console.cloud.tencent.com/im)>**アプリケーションの設定**>**機能設定**から、カスタムプロフィールフィールドを申請することができます。申請すると、カスタムプロフィールフィールドは5分以内に有効になります。
カスタムプロフィールフィールドを申請するときは、カスタムプロフィールフィールドごとに次の情報を送信してください：
- カスタムプロフィールフィールドの名称(Key)：詳細については、[カスタムプロフィールフィールドの命名規則](#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.B5.84.E6.96.99.E5.AD.97.E6.AE.B5.E7.9A.84.E5.91.BD.E5.90.8D.E8.A7.84.E8.8C.83)をご参照ください。
- カスタムプロフィールフィールドの型(Value)：詳細については、[プロフィールフィールド](#.E8.B5.84.E6.96.99.E5.AD.97.E6.AE.B5)をご参照ください。
- カスタムプロフィールフィールドの読み取り/書き込み権限：詳細については、[プロフィールフィールド](#.E8.B5.84.E6.96.99.E5.AD.97.E6.AE.B5)をご参照ください。

### カスタムプロフィールフィールドの命名規則
カスタムプロフィールフィールドの命名規則は次のとおりです：
- カスタムプロフィールフィールドの名称には、プレフィックスとキーワードが含まれます。
- カスタムプロフィールフィールドのプレフィックス：Tag_Profile_Custom。
- キーワード：必ずアルファベットとし、長さは8バイトを超えてはなりません。英単語または英単語の省略形を使用することをお勧めします。
- 例：特定のAppが申請するカスタムフィールドのキーワードがTestの場合、カスタムプロフィールフィールドの名称は、Tag_Profile_Custom_Testとなります。


