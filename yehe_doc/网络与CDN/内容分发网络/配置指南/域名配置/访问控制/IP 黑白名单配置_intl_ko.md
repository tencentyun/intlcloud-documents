## 설정 시나리오
서비스 리소스의 액세스 출처를 제어할 수 있도록 Tencent Cloud CDN은 IP 블랙리스트/화이트리스트 설정 기능을 제공합니다.

사용자 요청 IP에 대해 액세스 제어 정책을 설정하여 액세스 출처를 효과적으로 제한하고 악성 IP 도용, 공격 등의 문제를 방지할 수 있습니다.

## 설정 가이드

### 설정 조회
[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하여 메뉴바에서 [도메인 관리]를 선택하고 도메인 오른쪽의 [관리]를 클릭하면 도메인 설정 페이지로 이동할 수 있습니다. 그 중 두 번째 탭인 [액세스 제어]에서 IP 블랙리스트/화이트리스트 설정을 확인할 수 있으며 비활성화 상태로 기본 설정되어 있습니다.
![](https://main.qcloudimg.com/raw/f151317bd14f053a125bf0c3841da033.png)

### 설정 활성화

on-off 스위치를 클릭하여 블랙리스트/화이트리스트를 선택한 후, IP 또는 IP 대역 목록을 입력하고 [확인]을 클릭하면 IP 블랙리스트/화이트리스트 설정을 활성화할 수 있습니다.
![](https://main.qcloudimg.com/raw/0b278589542a7022b3525f80ecadd2e3.png)
**IP 블랙리스트**
클라이언트 IP가 블랙리스트의 IP 또는 IP 대역과 일치하는 경우, CDN 노드 액세스 시 곧바로 403 상태 코드를 반환합니다.
**IP 화이트리스트**
클라이언트 IP가 화이트리스트의 IP 또는 IP 대역과 일치하지 않는 경우, CDN 노드 액세스 시 곧바로 403 상태 코드를 반환합니다.
**설정 규정**

- IP 블랙리스트와 IP 화이트리스트에서 하나를 선택하며, 동시에 설정할 수는 없습니다.
- IP 블랙리스트는/화이트리스트 최대 200개까지 입력할 수 있습니다.
- IP 대역은 /8,/16,/24 IP 대역만 지원하며 다른 IP 대역은 지원하지 않습니다.
- `IP:포트` 형식의 블랙리스트/화이트리스트는 지원하지 않습니다.

### 설정 비활성화
사용자는 on-off 스위치를 통해 원클릭으로 IP 블랙리스트/화이트리스트 설정을 비활성화할 수 있습니다. 스위치가 비활성화 상태일 경우, 아래에 기존 설정이 존재하더라도 현재 네트워크에 적용되지 않습니다. 이후 활성화 시, 전체 네트워크에 배포 및 적용하기 전에 우선 설정을 재확인합니다.
![](https://main.qcloudimg.com/raw/24a3de16131fd945c05307493eb768f0.png)

>!사용자의 가속 도메인 서비스 지역이 글로벌 가속이면 설정한 IP 블랙리스트 및 화이트리스트가 글로벌 범위에 적용되며, 중국 본토 내/ 외 지역을 다르게 설정할 수 없습니다.

## 설정 예시

가속 도메인 `www.test.com`의 IP 블랙리스트/화이트리스트 설정이 아래와 같을 경우:
![](https://main.qcloudimg.com/raw/29a9307902d03f686345eef2964c5ec2.png)
실제 액세스 상황은 다음과 같습니다.
1. 클라이언트 IP가 `1.1.1.1`인 사용자가 리소스 `http://www.test.com/test.txt`에 액세스하였을 때 화이트리스트와 일치하는 경우 정상적으로 내용를 반환합니다.
2. 클라이언트 IP가 `2.1.1.1`인 사용자가 리소스 `http://www.test.com/test.txt`에 액세스하였을 때 화이트리스트와 일치하지 않는 경우 403을 반환합니다.

