## 소개

Cloud Object Storage(COS) 콘솔을 통해 버킷 정책을 추가함으로써 임의의 계정이나 출처 IP(또는 IP 필드)가 정책이 설정된 COS 리소스에 액세스하는 것을 허용 또는 금지할 수 있습니다. 버킷 정책 개요 및 정책 예시 관련 정보는 [액세스 정책 언어 개요](https://intl.cloud.tencent.com/document/product/436/18023) 및 [버킷 정책 예시](https://intl.cloud.tencent.com/document/product/436/18031)를 참고하십시오. 다음은 버킷 정책 추가 방법에 대한 자세한 소개입니다.

>! 루트 계정당 버킷 ACL 규칙은 최대 1,000개까지 생성할 수 있습니다.
>

## 전제 조건

생성된 버킷에 대한 자세한 내용은 [버킷 생성](https://intl.cloud.tencent.com/document/product/436/13309) 문서를 참고하십시오.

## 작업 단계

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인합니다.
2. 왼쪽 사이드바에서 **버킷 리스트**를 클릭한 후, 버킷 정책 추가가 필요한 버킷을 선택해 버킷으로 이동합니다.
3. **권한 관리**를 클릭해 **Policy 권한 설정**을 찾습니다. COS는 버킷 정책 추가 방식으로 **[그래픽 설정](#1)**과 **[정책 구문](#2)**을 제공합니다. 작업 단계는 다음을 참고하십시오. 이 중 하나의 방식을 선택해 버킷 정책을 추가할 수 있습니다. 설정 항목에 대한 더 많은 설명은 [액세스 정책 언어 개요](https://intl.cloud.tencent.com/document/product/436/18023)를 참고하십시오.

4. 설정 정보에 오류가 없는지 확인한 후, **확인** 또는 **저장**을 클릭합니다. 이 때 서브 계정을 사용해 COS 콘솔에 로그인하면 정책에 설정된 리소스 범위에 한해 액세스할 수 있습니다.

<span id=1></span>

## 그래픽 설정
그래픽 설정 섹션에서 **정책 추가**를 클릭하여 팝업 창에서 정책을 설정합니다. 1단계는 **템플릿 선택**이고 2단계는 **정책 설정**입니다.

### 1단계: 템플릿 선택

권한이 부여된 사용자 및 리소스 범위의 다양한 조합 선택을 통해 COS는 다양한 정책 템플릿을 제공하여 버킷 ​​정책을 신속하게 설정하도록 지원합니다.

- 권한이 부여된 사용자
 - **모든 사용자(익명 액세스 가능)**: 익명 사용자에게 작업 권한을 개방하려면 이 옵션을 선택합니다. 2단계 정책 설정 시 모든 사용자가 자동으로 추가되며, `*`로 표시됩니다. 익명 사용자에게 객체 리스트(ListBucket), 버킷 설정 권한 및 기타 작업을 개방하는 것은 위험하므로, 이 항목 선택 시 COS는 해당 템플릿을 제공하지 않습니다. 필요한 경우 ‘정책 설정’ 단계에서 직접 추가할 수 있습니다.
 - **지정된 사용자**: 지정된 서브 계정, 루트 계정 또는 클라우드 서비스에 운영 권한을 개방하려면 사용자를 지정합니다. 2단계 정책 설정 시 특정 계정 UIN을 추가로 지정해야 합니다.


- 리소스 범위
 - **전체 버킷**: 버킷 설정 관련 권한을 설정하거나 리소스 범위를 전체 버킷으로 지정하려면 이 옵션을 선택합니다. 2단계 정책 설정에서 전체 버킷이 자동으로 리소스로 추가됩니다.
 - **지정된 디렉터리**: 리소스 범위를 지정된 폴더로 제한하려는 경우 이 옵션을 선택합니다. 2단계 정책 설정에서 특정 디렉터리를 추가로 지정해야 합니다. 이 옵션을 선택하면 COS는 버킷 ​​설정 관련 정책 템플릿을 제공하지 않습니다. 이는 리소스를 전체 버킷으로 지정해야 하기 때문입니다.


- 템플릿: 권한을 부여할 작업 그룹입니다.
 - **사용자 정의 정책(사전 설정 미제공)**: 템플릿을 사용할 필요가 없는 경우 이 옵션을 선택하고 2단계 ‘정책 설정’에서 필요에 따라 정책을 추가할 수 있습니다.
 - **기타 템플릿**: 권한이 부여된 사용자 및 리소스 범위의 다양한 조합 선택에 따라 COS는 다양한 정책 템플릿을 제공합니다. 해당 템플릿을 선택한 후, 2단계 정책 설정에서 COS가 자동으로 해당 작업을 추가합니다.

>?템플릿에서 제공하는 권한 부여 작업이 요구 사항을 충족하지 않는 경우 2단계 ‘정책 설정’에서 권한 부여 작업을 추가하거나 삭제할 수 있습니다.

템플릿 설명은 아래 표를 참고하십시오.
<table>
   <tr>
      <th>권한 부여된 사용자</td>
      <th>리소스 범위</td>
      <th>정책 템플릿</td>
      <th>설명</td>
   </tr>
   <tr>
      <td colspan=2>모든 조합</td>
      <td>사용자 정의 정책</td>
      <td>권한이 부여된 사용자 및 리소스 범위의 조합에 대해 이 템플릿을 선택하면 사전 설정된 정책이 제공되지 않습니다. 2단계 정책 설정에서 정책을 직접 추가할 수 있습니다.</td>
   </tr>
   <tr>
      <td rowspan=4>모든 사용자(익명 액세스 가능)</td>
      <td rowspan=2>전체 버킷</td>
      <td>읽기 전용 객체(객체 리스트 제외)</td>
      <td rowspan=4>COS는 익명 사용자에 대해 파일 읽기(예: 다운로드) 및 파일 쓰기(예: 업로드 및 수정) 권장 템플릿을 제공합니다. <br><br>COS 권장 템플릿에는 데이터 보안을 위해 버킷의 모든 객체 나열, 읽기/쓰기 권한, 버킷 설정 등 민감한 권한이 포함되어 있지 않습니다.<br><br>필요한 경우 후속 단계에서 작업 권한을 추가 또는 삭제할 수 있습니다.</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 제외)</td>
   </tr>
   <tr>
      <td rowspan=2>지정된 디렉터리</td>
      <td>읽기 전용 객체(객체 리스트 제외)</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 제외)</td>
   </tr>
   <tr>
      <td rowspan=11>지정된 사용자</td>
      <td rowspan=7>전체 버킷</td>
      <td>읽기 전용 객체(객체 리스트 제외)</td>
      <td rowspan=7>COS는 지정된 사용자와 전체 버킷의 조합에 대해 가장 많은 권장 템플릿을 제공합니다. 파일 읽기 및 쓰기, 파일 나열 외에도 COS에는 신뢰할 수 있는 사용자에게 적합한 다음과 같은 민감 권한 템플릿이 포함되어 있습니다.<li>버킷 및 객체 ACL 읽기 및 쓰기: 버킷 ACL 및 객체 ACL 가져오기, 수정. GetObjectACL, PutObjectACL, GetBucketACL, PutBucketACL 포함. <li> 버킷 일반 설정 항목: 버킷 태그, 교차 출처, Origin-pull 및 기타 민감하지 않은 권한.<li>버킷 민감 설정 항목: 버킷 정책, 버킷 ACL, 버킷 삭제와 같은 민감한 권한이 포함되므로 신중히 사용해야 합니다.</td>
   </tr>
   <tr>
      <td>읽기 전용 객체(나열된 객체 리스트 포함)</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 제외)</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 포함)</td>
   </tr>
   <tr>
      <td>버킷 및 객체 ACL 읽기 및 쓰기</td>
   </tr>
   <tr>
      <td>버킷에 대한 일반 설정 항목</td>
   </tr>
   <tr>
      <td>버킷에 대한 민감 설정 항목</td>
   </tr>
   <tr>
      <td rowspan=4>지정된 디렉터리</td>
      <td>읽기 전용 객체(객체 리스트 제외)</td>
      <td rowspan=4>COS는 지정된 사용자와 지정된 디렉터리의 조합에 대해 파일 읽기(예: 다운로드) 및 파일 쓰기(예: 업로드, 수정) 외에도 , 객체 리스트 나열 권한을 포함하는 권장 템플릿을 제공합니다.<br><br>지정된 사용자에 대해 지정된 폴더의 읽기, 쓰기 및 파일 나열 권한을 개방하려면 이 조합을 권장합니다.<br><br>필요에 따라 후속 단계에서 작업 권한을 추가하거나 삭제할 수 있습니다.</td>
   </tr>
   <tr>
      <td>읽기 전용 객체(객체 리스트 나열 포함)</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 나열 제외)</td>
   </tr>
   <tr>
      <td>객체 읽기 및 쓰기(객체 리스트 나열 포함)</td>
   </tr>
</table>

### 2단계: 정책 설정
1단계에서 선택한 권한 부여된 사용자, 지정된 디렉터리 및 템플릿의 조합에 대해, COS는 해당 작업, 권한 부여된 사용자, 리소스 등을 정책 설정에 자동으로 추가합니다. 지정된 사용자 및 지정된 디렉터리를 선택한 경우, 정책 설정 시 특정 사용자 UIN 및 디렉터리를 지정해야 합니다.

COS에서 제공한 권장 템플릿이 요구 사항에 맞지 않을 경우 이 단계에서 권한이 부여된 사용자, 리소스 및 작업 추가 또는 삭제 등 정책 내용을 수정할 수 있습니다. 설정 항목 설명은 다음과 같습니다.
- 유효성: 정책 구문의 ‘허용’ 및 ‘거부’에 해당하는 ‘allow’ 또는 ‘deny’ 선택을 지원합니다.
- 사용자: 모든 사용자(`*`), 루트 계정, 서브 계정 및 클라우드 서비스 등 권한이 부여된 사용자 추가 및 삭제를 지원합니다.
- 리소스: 전체 버킷 또는 지정된 디렉터리 리소스 추가를 지원합니다.
- 작업: 권한을 부여해야 하는 작업을 추가 또는 삭제합니다.
- 조건: 사용자의 IP 액세스 제한 등 권한 부여 시 조건을 지정합니다.



<span id=2></span>

## 정책 구문
**편집**을 클릭해 정의한 정책 구문을 입력합니다. COS는 다양한 시나리오의 정책 구문을 제공합니다. 자세한 내용은 [버킷 정책 예시](https://intl.cloud.tencent.com/document/product/436/18031)를 참고하십시오.
![](https://main.qcloudimg.com/raw/b4e280ccbd67b081dcb59c4039f4d3b0.png)

