## 적용 시나리오
- 응답 지연 및 다운로드 속도에 대한 요구 사항이 높은 시나리오.
- 지역, 국가, 대륙 간에 GB~TB 용량의 데이터를 전송하는 시나리오.
- 같은 콘텐츠를 짧은 시간에 반복적으로 다운로드하는 시나리오.

>!다운로드 요청 출처가 Tencent Cloud VPC인 경우(예: Tencent Cloud CVM을 사용하여 버킷에 액세스) COS 표준 도메인을 직접 사용할 것을 권장합니다. CDN을 사용하여 도메인을 가속화하는 경우 사용자는 외부 네트워크를 통해 CDN 노드에 액세스하는 것과 동일하며, 이에 따라 CDN Origin-pull 트래픽 요금, CDN 트래픽 요금 등이 추가로 발생합니다.
>


## 관련 설명
도메인의 정의, CDN Origin-pull 인증, CDN 인증 설정에 대한 내용은 [CDN 가속 개요](https://intl.cloud.tencent.com/document/product/436/18669) 문서의 소개 내용을 확인하십시오.

CDN Origin-pull 인증, CDN 인증 설정에 따라 CDN 가속 도메인과 COS 도메인으로 원본 서버 버킷을 액세스하는 방식에 차이가 발생합니다. 자세한 내용은 다음 표를 참고하십시오.

| 버킷 액세스 권한       | CDN Origin-pull 인증 활성화 여부 | CDN 인증 설정 활성화 여부 | CDN 가속 도메인으로<br>원본 서버 액세스 가능 여부 | COS 원본 서버 도메인으로<br>원본 서버 액세스 가능 여부 | 적용 시나리오     |
| ------------------- | ------------ | ------------ | --------------- | --------------- | ------------ |
| 공개 읽기              | 비활성화         | 비활성화         | 액세스 가능          | 액세스 가능          | 전체 서버 공용 액세스 |
| 공개 읽기              | 활성화         | 비활성화         | 액세스 가능          | 액세스 가능          | 비권장       |
| 공개 읽기              | 비활성화         | 활성화         | URL 인증 필요          | 액세스 가능          | 비권장       |
| 공개 읽기              | 활성화         | 활성화         | URL 인증 필요          | 액세스 가능          | 비권장       |
| 개인 읽기+CDN 서비스 라이선스 | 활성화         | 활성화         | URL 인증 필요 | COS 인증 필요 | 전체 링크 보호   |
| 개인 읽기+CDN 서비스 라이선스 | 비활성화         | 활성화         | URL 인증 필요       | COS 인증 필요 | 비권장       |
| 개인 읽기+CDN 서비스 라이선스 | 활성화         | 비활성화         | 액세스 가능          | COS 인증 필요 | 원본 서버 보호    |
| 개인 읽기+CDN 서비스 라이선스 | 비활성화         | 비활성화         | 액세스 불가        | COS 인증 필요 | 비권장       |
| 개인 읽기              | 비활성화         | 활성화 또는 비활성화         | 액세스 불가 | COS 인증 필요 | CDN 이용 불가 |

>!위의 표에 기재된 **원본 서버 보호** 시나리오의 경우, CDN 인증 설정을 활성화하지 않으면 CDN 엣지 노드에 캐싱된 데이터가 악의적으로 풀링될 수 있으니 CDN 인증 설정을 활성화하여 데이터 보안을 강화하시기 바랍니다.

## 기본 가속 도메인에 대한 CDN 가속 설정

기본 가속 도메인은 COS에서 버킷에 자동 할당하는 CDN 가속 도메인으로, 형식은 `BucketName-APPID.file.myqcloud.com`이며, 사용자가 **활성화** 또는 **비활성화** 모드를 선택할 수 있습니다.

### 기능 활성화
#### 1. 버킷 선택
[COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인한 뒤 왼쪽 메뉴에서 [버킷 리스트]를 클릭하고, 다시 가속할 버킷을 클릭하여 버킷 관리 페이지로 이동합니다.

#### 2. 설정 페이지로 이동
>!Tencent Cloud CDN 서비스를 이용하지 않는 사용자는 [도메인 관리] 페이지에 들어갈 수 없습니다. 먼저 외부 링크를 이용해 [CDN 콘솔](https://console.cloud.tencent.com/cdn)로 이동한 뒤 CDN 서비스를 활성화하십시오.

왼쪽의 [도메인 및 전송 관리]>[기본 CDN 가속 도메인]을 클릭한 뒤 [기본 CDN 가속 도메인] 설정 항목을 찾습니다. 기본 CDN 가속 도메인의 기본값은 **비활성화**로 설정되어 있습니다. [편집]을 클릭하여 현재 상태를 **활성화**로 변경하십시오.
![](https://main.qcloudimg.com/raw/a027d3ae128de8349db903b8f1833019.png)
**가속 리전**: 중국 내외 및 글로벌 가속을 지원하며, 글로벌 가속의 경우 모든 리전 간 버킷의 가속을 지원합니다.
**원본 서버 유형**: 기본값은 **기본 원본 서버**입니다. 원본 서버인 버킷으로 정적 웹 사이트를 활성화한 뒤 가속하려면 원본 서버 유형을 **정적 웹 사이트 원본 서버**로 설정하십시오. 자세한 내용은 [CDN 가속 개요](https://cloud.tencent.comhttps://intl.cloud.tencent.com/document/product/436/18669)를 참고하십시오.

#### 3. CDN 서비스 라이선스 추가(옵션)

CDN 서비스 라이선스를 추가하면 CDN 엣지 노드에서 버킷에 작업할 수 있는 자격이 부여됩니다. 자세한 내용은 다음과 같습니다.

- 공개 읽기 버킷: 라이선스가 없어도 CDN 엣지 노드에서 버킷에 바로 액세스할 수 있으므로 CDN 서비스 라이선스를 추가하지 않아도 됩니다.
- 개인 읽기 버킷: 특정한 서비스 자격이 있어야 CDN 엣지 노드에서 버킷에 액세스할 수 있습니다. [CDN 서비스 라이선스 추가]를 클릭하여 CDN 엣지 노드 서비스 자격을 부여받은 뒤 [위의 라이선스에 동의합니다]를 선택하고 [확인]을 클릭합니다.

라이선스를 추가하면 CDN 엣지 노드에서 버킷에 대해 Get Object, Head Object, Options Object의 세 가지 작업을 수행할 수 있습니다.

![](https://main.qcloudimg.com/raw/ca62b2f78b7587245efbe0b03f84adee.png)

권한 부여에 동의하면 다음과 같은 버킷 액세스 정책이 자동 입력됩니다. 이후 CDN 노드에서 Origin-pull을 실행할 때 별도의 작업을 수행하지 않아도 됩니다.

```xml
  {
    "Statement": [
      {
        "Action": [
          "name/cos:GetObject",
          "name/cos:HeadObject",
          "name/cos:OptionsObject"
        ],
        "Effect": "allow",
        "Principal": {
          "qcs": [
            "qcs::cam::uin/100000000001:service/cdn"
          ]
        },
        "Resource": [
          "qcs::cos:ap-chengdu:uid/1250000000:examplebucket-1250000000/*"
        ]
      }
    ],
    "version": "2.0"
  }
```

#### 4. Origin-pull 인증 활성화(옵션)
>!CDN 서비스 라이선스를 추가해야 Origin-pull 인증을 활성화할 수 있습니다.

Origin-pull 인증은 불법 액세스를 차단하기 위해 CDN 엣지 노드의 서비스 자격을 인증하는 용도입니다. 자세한 내용은 다음과 같습니다.
- 공개 읽기 버킷: 라이선스가 없어도 CDN 엣지 노드에서 버킷에 바로 액세스할 수 있으므로 Origin-pull 인증을 실행하지 않아도 됩니다.
- 개인 읽기 버킷: CDN 엣지 노드는 Origin-pull 인증을 통해 서비스 자격을 인증해야 하며, 인증을 통과해야 버킷에 저장된 객체에 액세스할 수 있습니다.

라이선스 부여하고 [Origin-pull 인증]을 클릭하여 활성화합니다.

![](https://main.qcloudimg.com/raw/58c92ca577ca99d1fd5d9523e25dcec4.png)


>!개인 읽기 버킷의 경우, Origin-pull 인증과 CDN 서비스 라이선스를 활성화하면 서명 없이도 CDN 엣지 노드에서 원본 서버로 액세스할 수 있습니다. CDN 캐시 리소스가 공용 네트워크로 전송되어 데이터 보안이 취약할 수 있으니 CDN 인증을 활성화하시길 권장합니다.

#### 5. CDN 가속 활성화
[저장]을 클릭하면 기본 CDN 가속 도메인의 배포를 시작합니다(약 5분 소요).

### 인증 설정
>!기본 도메인에 CDN 가속을 활성화하면 누구나 해당 도메인으로 원본 서버에 바로 액세스할 수 있습니다. 보안이 필요한 데이터의 경우, 인증 설정을 통해 원본 서버의 데이터를 보호하십시오.

기본 가속 도메인과 Origin-pull 인증을 활성화하면 기본 CDN 가속 도메인 관리 인터페이스에 CDN 인증 상태 알림바가 나타납니다. 알림바의 [인증 설정] 메뉴를 통해 설정할 도메인의 CDN 보안 설정 페이지로 이동할 수 있습니다.
![](https://main.qcloudimg.com/raw/a878861f79ea47e27c127c5b5dff4eb4.png)

[CDN 콘솔](https://console.cloud.tencent.com/cdn)에서 CDN 인증 설정 페이지로 이동하는 순서는 [도메인 관리] > 설정할 도메인의 [관리] > [보안 설정]입니다. 자세한 설정 단계는 [인증 설정](https://intl.cloud.tencent.com/document/product/228/35237)을 참고하십시오.


### 기능 비활성화
기본 CDN 가속 도메인을 비활성화하는 방법에는 다음 두 가지 방법이 있습니다.

- 기본 CDN 가속 도메인 관리 인터페이스에서 [편집]을 클릭하여 상태를 **활성화**에서 **비활성화**로 변경한 뒤 [저장]을 클릭합니다. 배포 완료까지 5분가량 소요됩니다. 배포를 마치면 CDN 콘솔의 해당 도메인 상태가 **활성화됨**에서 **비활성화됨**으로 변경됩니다.
- [CDN 콘솔](https://console.cloud.tencent.com/cdn)에서 도메인의 비활성화/삭제 작업을 실행할 수 있으며, 자세한 내용은 [도메인 작업](https://intl.cloud.tencent.com/document/product/228/5736)을 참고하십시오.
>!CDN 콘솔에서 삭제되는 것은 기본 가속 도메인의 CDN 가속 모드에서의 기록이며, 기본 가속 도메인을 완전히 삭제하려면 COS 콘솔에서 기본 가속 도메인을 다시 활성화하십시오.


## 사용자 정의 도메인에 CDN 가속 설정
COS 콘솔에서 버킷에 사용자 정의 도메인을 바인딩할 수 있습니다. 바인딩 이후 CDN 가속을 활성화하면 사용자 정의 도메인으로 버킷에 가속 액세스할 수 있습니다. 사용자 정의 도메인을 바인딩할 때 사용자 정의 도메인의 서비스 공급자로부터 CNAME 리졸브를 직접 추가해야 합니다.
>! 현재 COS에서 사용자 정의 도메인을 사용할 경우 반드시 CDN을 활성화해야 합니다. 실제 상황에 따라 선택하여 적용하시기 바랍니다.
1. 도메인으로 중국 내 CDN에 액세스하는 경우, ICP비안이 필요합니다. 하지만 Tencent Cloud의 경우, ICP비안이 필수사항이 아니며, 액세스할 도메인이 등록된 도메인이면 가능합니다.
2. 도메인으로 해외 CDN에 액세스하는 경우, ICP비안이 필요하지 않습니다. 단, Tencent Cloud에 저장한 데이터와 작업에 관해서는 관련 국가의 법률, 법규 및 [<Tencent Cloud 서비스 수준 계약>](https://intl.cloud.tencent.com/document/product/301/12905)을 준수해야 합니다.

### 기능 활성화
>!COS 콘솔과 CDN 콘솔에서 사용자 정의 도메인을 추가할 수 있고, CDN 가속 활성화도 가능합니다. CDN 콘솔에서 사용자 정의 도메인을 추가하려면 [도메인 연결](https://intl.cloud.tencent.com/document/product/228/5734)을 참고하십시오.

#### 1. 버킷 선택
[COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인한 뒤 왼쪽 메뉴에서 [버킷 리스트]를 클릭하고, 다시 가속 설정할 버킷을 클릭하여 버킷으로 이동합니다.

#### 2. 사용자 정의 CDN 가속 도메인 추가
[도메인 및 전송 관리]>[사용자 정의 CDN 가속 도메인]을 클릭하고 [사용자 정의 CDN 가속 도메인] 설정 항목에서 [도메인 추가]를 클릭하여 설정 상태로 이동합니다.
- **도메인**: 구매한 도메인을 입력합니다(예시: `www.example.com`).
- **가속 리전**: 중국 내외 및 글로벌 가속을 지원하며, 글로벌 가속의 경우 모든 리전 간 버킷의 가속을 지원합니다.
- **원본 서버 유형**: 기본값은 **기본 원본 서버**입니다. 선택한 버킷의 정적 웹 사이트 기능을 활성화한 뒤 가속하려면 원본 서버 유형을 **정적 웹 사이트 원본 서버**로 설정하십시오.


#### 3. Origin-pull 인증 활성화(옵션)
Origin-pull 인증은 불법 액세스를 차단하기 위해 CDN 엣지 노드의 서비스 자격을 인증하는 용도입니다. 자세한 내용은 다음과 같습니다.

- 공개 읽기 버킷: 라이선스가 없어도 CDN 엣지 노드에서 버킷에 바로 액세스할 수 있으므로 Origin-pull 인증을 실행하지 않아도 됩니다.
- 개인 읽기 버킷: CDN 엣지 노드는 Origin-pull 인증을 통해 서비스 자격을 인증해야 하며, 인증을 통과해야 버킷에 저장된 객체에 액세스할 수 있습니다. [Origin-pull 인증] 활성화를 선택하십시오.
![](https://main.qcloudimg.com/raw/da5fe7285a8a2932cfb015c361472202.png)
>!개인 읽기 버킷의 경우, Origin-pull 인증을 활성화하면 서명이 없이도 CDN 엣지 노드에서 원본 서버로 액세스할 수 있습니다. CDN 캐시 리소스가 공용 네트워크로 전송되어 데이터 보안이 취약할 수 있으니 CDN 인증을 활성화하시길 권장합니다.

#### 4. CDN 가속 활성화

오른쪽의 [저장]을 클릭하고 5분 정도 기다리면 사용자 정의 도메인이 추가되고, CDN 가속 배포가 완료됩니다.

### 인증 설정
>!사용자 정의 도메인에 CDN 가속을 활성화하면 누구나 해당 도메인으로 원본 서버에 바로 액세스할 수 있습니다. 보안이 필요한 데이터의 경우, 인증 설정을 통해 원본 서버의 데이터를 보호하십시오.

사용자 정의 도메인의 배포가 완료되면 CDN 인증 메뉴에 CDN 인증 기능 설정을 위한 링크가 나타납니다. 이때 [설정]을 클릭하면 CDN 콘솔로 이동해 CDN 인증을 설정할 수 있습니다. 자세한 내용은 [인증 설정](https://intl.cloud.tencent.com/document/product/228/35237)을 참고하십시오.
![](https://main.qcloudimg.com/raw/b0e9b2e0febc4b480a16a11f06498740.png)


### 도메인 리졸브
사용자 정의 도메인으로 CDN에 액세스하면, 시스템이 자동으로 CNAME 도메인(접미사는 `.cdn.dnsv1.com`) 1개를 할당합니다. CNAME 설정은 도메인 서비스 공급자가 할 수 있으며, 자세한 내용은 [CNAME 설정](https://intl.cloud.tencent.com/document/product/228/3121)을 참고하십시오.

>!CNAME 도메인으로 바로 액세스할 수 없습니다.


### 기능 비활성화
사용자 정의 CDN 가속 도메인 관리 인터페이스에서 [편집]을 클릭하여 도메인 상태를 변경할 수 있습니다. 도메인 상태를 **사용 중**에서 **사용하지 않음**으로 변경한 뒤 [저장]을 클릭하여 배포합니다. 약 5분 경과 후 기능이 비활성화되며, CDN 콘솔의 해당 사용자 정의 가속 도메인 상태도 **활성화됨**에서 **비활성화됨**으로 변경됩니다.

>!사용자 정의 도메인을 삭제할 경우, 사용자 정의 도메인이 **사용 중** 상태일 때는 바로 삭제할 수 없습니다. 상태를 **사용하지 않음**으로 변경한 뒤 삭제하십시오. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에서 도메인의 비활성화 또는 삭제 작업을 실행할 수 있으며, 자세한 내용은 [도메인 작업](https://intl.cloud.tencent.com/document/product/228/5736)을 참고하십시오.



