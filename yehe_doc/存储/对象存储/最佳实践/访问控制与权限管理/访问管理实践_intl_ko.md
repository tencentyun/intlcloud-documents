## CAM 개요

Cloud Access Management(CAM)는 Tencent Cloud가 제공하는 일종의 인증 및 권한 부여 서비스로, Tencent Cloud 계정의 리소스 액세스 권한을 안전하게 관리하는 데 주로 사용합니다. 권한 부여 시 권한을 부여한 객체, 리소스, 작업을 관리할 수 있으며 일부 정책 제한을 설정할 수 있습니다.

## 기능
#### 루트 계정 리소스에 대한 권한 부여
루트 계정의 리소스 권한을 다른 서브 계정 또는 기타 루트 계정을 포함한 사용자에게 부여할 수 있으며, 루트 계정의 관련 자격 증명을 공유하지 않아도 됩니다.

#### 세분화된 권한 관리
사용자별로 각 리소스에 대한 서로 다른 액세스 권한을 부여할 수 있습니다. 예를 들어 어떤 서브 계정에서는 특정 COS 버킷에 대한 읽기 권한 허용하고, 다른 서브 계정 또는 루트 계정에는 특정 COS 스토리지 객체에 대한 쓰기 권한을 부여할 수 있습니다. 해당 리소스, 액세스 권한, 사용자는 일괄 패키징할 수 있습니다.

#### 최종 일관성
CAM은 현재 Tencent Cloud의 여러 리전을 지원하며, 정책 데이터 복사를 통해 리전 간 데이터 동기화를 실현합니다. CAM 정책 수정이 즉시 제출된다고 해도 리전 간 정책 동기화에는 정책 적용 딜레이가 발생하고, CAM에서 캐시를 사용하여 성능을 향상시키므로(현재는 1분 캐시) 업데이트는 캐시 만료 후 적용됩니다.

## 응용 시나리오

**기업의 서브 계정 권한 관리**

기업 내의 각 직급별 직원은 해당 기업의 클라우드 리소스에 대한 최소한의 액세스 권한이 필요합니다. 예를 들어 CVM, VPC 인스턴스, CDN 인스턴스, COS 버킷 및 객체 등 방대한 클라우드 리소스를 가지고 있고 개발자, 테스트 직원, 유지보수 직원 등을 포함한 수 많은 직원이 근무하고 있는 기업이 있다고 가정합니다.
일부 개발자는 담당하고 있는 프로젝트 관련 개발 서버 클라우드 리소스에 대한 읽기 및 쓰기 권한을 필요하며, 테스트 직원은 담당하고 있는 프로젝트의 테스트 서버 클라우드 리소스에 대한 읽기 및 쓰기 권한이 필요하고, 유지보수 직원은 서버의 구매 및 일상 유지보수를 책임져야 합니다. 기업의 직원의 직책 또는 참여 프로젝트가 변경되면 해당 권한을 중지할 수 있습니다.

**기업 간의 권한 관리**

서로 다른 기업 간에 클라우드 공유가 필요할 수 있습니다. 예를 들어 어떤 기업이 많은 클라우드 리소스를 보유하고 있으며 제품 개발에만 집중하고 싶어 클라우드 리소스 유지보수 업무는 다른 운영 업체에 위탁한다 가정합니다. 운영 업체와의 계약 종료 시 해당하는 관리 권한을 회수할 수 있습니다.

## 정책 구문
정책(policy)은 몇 개의 요소로 구성되며, 권한의 구체적인 정보를 기술하는 데 사용합니다. 핵심 요소로는 위탁인(principal), 작업(action), 리소스(resource), 효력 발생 조건(condition), 효과(effect)이 있으며, 자세한 내용은 [액세스 정책 언어 개요](https://intl.cloud.tencent.com/document/product/436/18023)를 참조하십시오.

>?
>- 정책 구문은 서술 순서에 대한 요구는 없으며, 작업(action) 요소는 영어 대소문자를 구분합니다.
>- 정책에 특정 조건의 제한이 없는 상황에서 condition 요소는 옵션 항목입니다.
>- 콘솔에서는 principal 요소는 입력할 수 없으며, 정책 관리 API 및 정책 구문 관련 매개변수에서만 principal을 지원합니다.

#### 핵심 요소

| 핵심 요소           | 설명                                                         | 필수 입력 여부                                              |
| ------------------ | ------------------------------------------------------------ | ----------------------------------------------------- |
| 버전 version       | 정책 구문 버전 설명입니다. 현재는 2.0만 허용됩니다.                        | 예                                                    |
| 위탁인 principal   | 정책 권한의 실체를 기술하는 데 사용되며, 사용자(개발사, 서브 계정, 익명의 사용자), 사용자 그룹이 포함됩니다.  | 정책 관리 API의 정책 구문 관련 매개변수에서만 해당 요소를 사용할 수 있습니다. |
| 명령 statement     | 하나 또는 다수의 권한과 관련된 자세한 정보를 기술하는 데 사용합니다. 이 요소에는 action, resource, condition, effect 등 기타 여러 요소의 권한 또는 권한 조합이 포함됩니다. 하나의 정책의 하나의 statement 요소만 가지고 있습니다. | 예                                                    |
| 작업 action        | 작업 허용 또는 거부를 기술하는 데 사용합니다. 작업은 단일 API 작업 또는 여러 API 작업의 조합일 수 있으며, 작업(action) 요소는 영어 대소문자를 구분합니다. 예: `name/cos:GetService` | 예   |
| 리소스 resource      | 권한 부여의 구체적인 데이터를 기술하는 데 사용합니다. 리소스는 6단식 기술을 사용하며, 모든 제품마다 리소스의 정보 정의의 차이가 있습니다. 리소스 정보를 어떻게 지정할 지에 대해서는 작성한 리소스 선언에 대한 제품 문서를 참조하십시오. | 예   |
| 효력 발생 조건 condition | 정책의 효력이 발생하는 규제 조건을 기술하는 데 사용합니다. condition에는 오퍼레이터, 작업 키, 작업 값 구성이 포함되며, 작업 값은 시간, IP 주소 등의 정보를 포함합니다. 일부 서비스는 조건에 기타 값을 지정할 수 있습니다. | 아니오   |
| 효과 effect        | 선언으로 발생하는 결과를 기술하는 데 사용하며, allow(허용), deny(명시적 거부) 두 가지가 있습니다. | 예                                                    |

#### 정책 제한

| 제한 항목                             | 제한값 |
|---------|---------|
|루트 계정별 사용자 그룹 수 | 300| 
|루트 계정별 서브 계정 수 | 1000 | 
| 루트 계정별 역할 수 | 1000 | 
| 서브 계정별 참여 가능한 사용자 그룹 수 | 10 | 
| 협업 파트너별 협업 가능한 루트 계정 수 | 10 | 
|사용자 그룹별 서브 계정 수 | 100 | 
| 루트 계정별 생성 가능한 사용자 정의 정책 수 | 1500 | 
| 사용자, 사용자 그룹 또는 역할과 직접 연결할 수 있는 정책 수 | 200 | 
| 정책 구문별 최대 바이트 수 | 4096 |

#### 정책 예시
다음은 ID가 100000000001(APPID는 1250000000)인 루트 계정 아래의 ID가 100000000011인 서브 계정에 베이징 리전의 버킷 examplebucket-bj와 광저우 리전의 버킷 examplebucket-gz의 객체 exampleobject에 대해, 액세스 IP가 `10.*.*.10/24` 대역인 경우 **객체 업로드** 및 **객체 다운로드** 권한을 부여하는 정책 예시입니다.

```json
{
			"version": "2.0",
			"principal": {
				"qcs": ["qcs::cam::uin/100000000001:uin/100000000011"]
			},
			"statement": [{
				"effect": "allow",
				"action": ["name/cos:PutObject", "name/cos:GetObject"],
				"resource": ["qcs::cos:ap-beijing:uid/1250000000:examplebucket-bj-1250000000/*",
					"qcs::cos:ap-guangzhou:uid/1250000000:examplebucket-gz-1250000000/exampleobject"
				],
				"condition": {
					"ip_equal": {
						"qcs:ip": "10.*.*.10/24"
					}
				}
			}]
}
```

